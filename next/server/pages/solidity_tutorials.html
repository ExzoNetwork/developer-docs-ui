<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Solidity Tutorials - EXZO NETWORK</title><meta name="description"/><link rel="icon" href="/favicon.svg" sizes="any"/><meta name="next-head-count" content="5"/><script>
  let darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)')

  updateMode()
  darkModeMediaQuery.addEventListener('change', updateModeWithoutTransitions)
  window.addEventListener('storage', updateModeWithoutTransitions)

  function updateMode() {
    let isSystemDarkMode = darkModeMediaQuery.matches
    let isDarkMode = window.localStorage.isDarkMode === 'true' || (!('isDarkMode' in window.localStorage) && isSystemDarkMode)

    if (isDarkMode) {
      document.documentElement.classList.add('dark')
    } else {
      document.documentElement.classList.remove('dark')
    }

    if (isDarkMode === isSystemDarkMode) {
      delete window.localStorage.isDarkMode
    }
  }

  function disableTransitionsTemporarily() {
    document.documentElement.classList.add('[&_*]:!transition-none')
    window.setTimeout(() => {
      document.documentElement.classList.remove('[&_*]:!transition-none')
    }, 0)
  }

  function updateModeWithoutTransitions() {
    disableTransitionsTemporarily()
    updateMode()
  }
</script><link rel="preload" href="/_next/static/css/6b34a2321c6c4eef.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6b34a2321c6c4eef.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-4faf4a0c84411cba.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-32b453998ded9c12.js" defer=""></script><script src="/_next/static/chunks/pages/_app-490bc1a5cd828e78.js" defer=""></script><script src="/_next/static/chunks/675-5b70c02e61184c35.js" defer=""></script><script src="/_next/static/chunks/pages/solidity_tutorials-fb2b089d273512c3.js" defer=""></script><script src="/_next/static/yAxsx7lFrlH2wGZWlIy3B/_buildManifest.js" defer=""></script><script src="/_next/static/yAxsx7lFrlH2wGZWlIy3B/_ssgManifest.js" defer=""></script></head><body class="bg-white antialiased dark:bg-zinc-900"><div id="__next"><div class="lg:ml-72 xl:ml-80"><header class="contents lg:pointer-events-none lg:fixed lg:inset-0 lg:z-40 lg:flex"><div class="contents lg:pointer-events-auto lg:block lg:w-72 lg:overflow-y-auto lg:border-r lg:border-zinc-900/10 lg:px-6 lg:pb-8 lg:pt-4 lg:dark:border-white/10 xl:w-80"><div class="hidden lg:flex"><a aria-label="Home" href="/"><svg width="171" height="18" viewBox="0 0 171 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_9_291)"><path d="M28.02 9.53994L29.2411 8.31075H25.7099V9.53994H28.02ZM30.0656 4.49799H23.4697V13.4936H30.0656V12.1549H24.9087V5.83679H30.0656V4.49799Z" fill="#11141A" class="dark:fill-white"></path><path d="M101.751 9.53994L102.972 8.31075H99.4411V9.53994H101.751ZM103.797 4.49799H97.2012V13.4936H103.797V12.1549H98.64V5.83679H103.797V4.49799Z" fill="#11141A" class="dark:fill-white"></path><path d="M34.4763 4.17484H36.0273L36.1565 4.23987L38.5476 7.36208L40.9386 4.23987L41.0678 4.17484H42.6189L42.6832 4.23987L39.3876 8.46788L43.0709 13.2162L43.0067 13.2813H41.4557L41.3263 13.2162L38.5476 9.57367L35.7687 13.2162L35.6395 13.2813H34.0886L34.0239 13.2162L37.7074 8.46788L34.4117 4.23987L34.4763 4.17484Z" fill="#11141A" class="dark:fill-white"></path><path d="M47.137 4.17484H54.181L54.2457 4.23987L49.1404 11.9804H54.2457L54.3099 12.0584V13.2162L54.2457 13.2813H46.7493L46.6846 13.2162L51.7898 5.47577H47.137L47.0723 5.4107V4.23987L47.137 4.17484Z" fill="#11141A" class="dark:fill-white"></path><path d="M63.686 3.97971C66.3227 3.97971 68.4683 6.11319 68.4683 8.72805C68.4683 11.3429 66.3227 13.4764 63.686 13.4764C61.0493 13.4764 58.9038 11.3429 58.9038 8.72805C58.9038 6.11319 61.0493 3.97971 63.686 3.97971ZM63.686 5.34567C61.8635 5.34567 60.3901 6.85472 60.3901 8.72805C60.3901 10.6014 61.8635 12.1105 63.686 12.1105C65.5085 12.1105 66.9816 10.6014 66.9816 8.72805C66.9816 6.85472 65.5085 5.34567 63.686 5.34567Z" fill="#11141A" class="dark:fill-white"></path><path d="M141.886 3.97971C144.522 3.97971 146.668 6.11319 146.668 8.72805C146.668 11.3429 144.522 13.4764 141.886 13.4764C139.249 13.4764 137.104 11.3429 137.104 8.72805C137.104 6.11319 139.249 3.97971 141.886 3.97971ZM141.886 5.34567C140.063 5.34567 138.59 6.85472 138.59 8.72805C138.59 10.6014 140.063 12.1105 141.886 12.1105C143.708 12.1105 145.181 10.6014 145.181 8.72805C145.181 6.85472 143.708 5.34567 141.886 5.34567Z" fill="#11141A" class="dark:fill-white"></path><path d="M163.667 4.17484H164.83L164.895 4.23987V7.36208L168.578 4.23987L168.707 4.17484H170.388L170.452 4.23987L165.864 8.0776L170.969 13.2162L170.904 13.2813H169.224L169.095 13.2162L164.895 8.92319V13.2162L164.83 13.2813H163.667L163.602 13.2162V4.23987L163.667 4.17484Z" fill="#11141A" class="dark:fill-white"></path><path d="M108.823 4.17484H115.931L115.996 4.23987V5.4107L115.931 5.47577H113.023V13.2162L112.959 13.2813H111.796L111.731 13.2162V5.47577H108.823L108.758 5.4107V4.23987L108.823 4.17484Z" fill="#11141A" class="dark:fill-white"></path><path d="M120.48 4.17484H121.773L121.837 4.23987L123.905 11.1348L125.909 4.36997L125.973 4.30494H127.266L127.331 4.36997L129.333 11.1348L131.402 4.23987L131.466 4.17484H132.759L132.823 4.23987L130.045 13.2162L129.98 13.2813H128.752L128.687 13.2162L126.619 6.51649L124.552 13.2162L124.487 13.2813H123.259L123.194 13.2162L120.416 4.23987L120.48 4.17484Z" fill="#11141A" class="dark:fill-white"></path><path d="M89.4004 11.8059L83.6375 4.49792H82.3037V13.4936H83.6375V6.19345L89.4004 13.4936H90.7264V4.49792H89.4004V11.8059Z" fill="#11141A" class="dark:fill-white"></path><path d="M157.746 9.38414C157.858 9.2953 157.955 9.19841 158.035 9.10953C158.476 8.60881 158.717 7.9385 158.717 7.23583C158.717 5.8709 157.778 4.49792 155.973 4.49792H150.822V13.7615H152.193V5.64478H155.973C157.08 5.64478 157.569 6.44433 157.569 7.22774C157.569 7.64772 157.425 8.05156 157.176 8.33421C156.912 8.63303 156.543 8.80266 156.077 8.81879H154.649H152.587V9.96565H155.331L157.586 13.7454H159.014L156.711 9.87681C157.16 9.7718 157.497 9.57799 157.746 9.368V9.38414Z" fill="#11141A" class="dark:fill-white"></path><path opacity="0.1" fill-rule="evenodd" clip-rule="evenodd" d="M7.1855 13.6256C6.42963 13.6256 5.69833 13.5223 5.00391 13.3279C5.08574 14.1893 5.24949 15.0437 5.49507 15.8802C8.03275 15.2642 10.3426 13.9233 12.1395 12.0105L12.1012 11.9705C10.7314 13.0096 9.03007 13.6256 7.18414 13.6256H7.1855Z" fill="black" class="dark:fill-white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11.5687 2.24908L7.71304 0C6.58745 1.3726 5.74155 2.93676 5.20264 4.59875C8.16872 5.22444 10.7896 6.7996 12.7379 8.99772C13.8936 10.3014 14.8118 11.8228 15.4257 13.4931V4.49818H15.4244L11.5701 2.24908H11.5687Z" fill="url(#paint0_linear_9_291)" class="dark:fill-white"></path><path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M6.54053 1.66239C6.54861 1.64855 6.55797 1.63472 6.56601 1.62088L6.54053 1.66239Z" fill="#A4A4A4" class="dark:fill-white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M5.19819 13.3899C3.50365 13.7496 1.73955 13.7923 0 13.4933L3.85702 15.7423L7.71404 17.9914L11.5697 15.7423L15.4267 13.4933C14.8128 11.8216 13.8946 10.3002 12.739 8.99783C10.7197 11.28 8.05785 12.7849 5.20091 13.3899H5.19819Z" fill="url(#paint1_linear_9_291)" class="dark:fill-white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0 4.49891V13.4952C1.73955 13.7942 3.50366 13.7502 5.19819 13.3919C4.25131 10.484 4.29226 7.40396 5.20091 4.60089C5.74119 2.93887 6.58572 1.37471 7.71132 0.00210571L3.85429 2.25119L0 4.49891Z" fill="url(#paint2_linear_9_291)" class="dark:fill-white"></path><path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M2.12738 7.83319C1.62257 9.7336 1.51069 11.736 1.80539 13.6819C2.94872 13.7246 4.08795 13.6254 5.19852 13.3898C4.25168 10.4819 4.29259 7.40186 5.20128 4.59875C5.74156 2.93676 6.5861 1.3726 7.71169 0C4.87383 1.85081 2.96509 4.6773 2.12738 7.83319Z" fill="url(#paint3_linear_9_291)" class="dark:fill-white"></path></g><defs><linearGradient id="paint0_linear_9_291" x1="17.0861" y1="12.1081" x2="6.04798" y2="0.0316813" gradientUnits="userSpaceOnUse"><stop stop-color="#11171F"></stop><stop offset="1" stop-color="#47484A"></stop></linearGradient><linearGradient id="paint1_linear_9_291" x1="16.4923" y1="11.3779" x2="-0.355658" y2="16.9553" gradientUnits="userSpaceOnUse"><stop stop-color="#11171F"></stop><stop offset="1" stop-color="#47484A"></stop></linearGradient><linearGradient id="paint2_linear_9_291" x1="0.34791" y1="15.2537" x2="6.01552" y2="-0.315784" gradientUnits="userSpaceOnUse"><stop stop-color="#11171F"></stop><stop offset="1" stop-color="#47484A"></stop></linearGradient><linearGradient id="paint3_linear_9_291" x1="4.67811" y1="0" x2="4.67811" y2="13.6916" gradientUnits="userSpaceOnUse"><stop stop-color="#11171F"></stop><stop offset="1" stop-color="#47484A" stop-opacity="0.49"></stop></linearGradient><clipPath id="clip0_9_291"><rect width="171" height="18" fill="white"></rect></clipPath></defs></svg></a></div><div class="fixed inset-x-0 top-0 z-50 flex h-14 items-center justify-between gap-12 px-4 transition sm:px-6 lg:left-72 lg:z-30 lg:px-8 xl:left-80 backdrop-blur-sm dark:backdrop-blur lg:left-72 xl:left-80 bg-white/[var(--bg-opacity-light)] dark:bg-zinc-900/[var(--bg-opacity-dark)]" style="--bg-opacity-light:0.5;--bg-opacity-dark:0.2"><div class="absolute inset-x-0 top-full h-px transition bg-zinc-900/7.5 dark:bg-white/7.5"></div><div class="hidden lg:block lg:max-w-md lg:flex-auto"><button type="button" class="hidden h-8 w-full items-center gap-2 rounded-full bg-white pl-2 pr-3 text-sm text-zinc-500 ring-1 ring-zinc-900/10 transition hover:ring-zinc-900/20 dark:bg-white/5 dark:text-zinc-400 dark:ring-inset dark:ring-white/10 dark:hover:ring-white/20 lg:flex focus:[&amp;:not(:focus-visible)]:outline-none"><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="h-5 w-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" d="M12.01 12a4.25 4.25 0 1 0-6.02-6 4.25 4.25 0 0 0 6.02 6Zm0 0 3.24 3.25"></path></svg>Find something...<kbd class="ml-auto text-2xs text-zinc-400 dark:text-zinc-500"><kbd class="font-sans"></kbd><kbd class="font-sans">K</kbd></kbd></button></div><div class="flex items-center gap-5 lg:hidden"><button type="button" class="flex h-6 w-6 items-center justify-center rounded-md transition hover:bg-zinc-900/5 dark:hover:bg-white/5" aria-label="Toggle navigation"><svg viewBox="0 0 10 9" fill="none" stroke-linecap="round" aria-hidden="true" class="w-2.5 stroke-zinc-900 dark:stroke-white"><path d="M.5 1h9M.5 8h9M.5 4.5h9"></path></svg></button><a aria-label="Home" href="/"><svg width="171" height="18" viewBox="0 0 171 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_9_291)"><path d="M28.02 9.53994L29.2411 8.31075H25.7099V9.53994H28.02ZM30.0656 4.49799H23.4697V13.4936H30.0656V12.1549H24.9087V5.83679H30.0656V4.49799Z" fill="#11141A" class="dark:fill-white"></path><path d="M101.751 9.53994L102.972 8.31075H99.4411V9.53994H101.751ZM103.797 4.49799H97.2012V13.4936H103.797V12.1549H98.64V5.83679H103.797V4.49799Z" fill="#11141A" class="dark:fill-white"></path><path d="M34.4763 4.17484H36.0273L36.1565 4.23987L38.5476 7.36208L40.9386 4.23987L41.0678 4.17484H42.6189L42.6832 4.23987L39.3876 8.46788L43.0709 13.2162L43.0067 13.2813H41.4557L41.3263 13.2162L38.5476 9.57367L35.7687 13.2162L35.6395 13.2813H34.0886L34.0239 13.2162L37.7074 8.46788L34.4117 4.23987L34.4763 4.17484Z" fill="#11141A" class="dark:fill-white"></path><path d="M47.137 4.17484H54.181L54.2457 4.23987L49.1404 11.9804H54.2457L54.3099 12.0584V13.2162L54.2457 13.2813H46.7493L46.6846 13.2162L51.7898 5.47577H47.137L47.0723 5.4107V4.23987L47.137 4.17484Z" fill="#11141A" class="dark:fill-white"></path><path d="M63.686 3.97971C66.3227 3.97971 68.4683 6.11319 68.4683 8.72805C68.4683 11.3429 66.3227 13.4764 63.686 13.4764C61.0493 13.4764 58.9038 11.3429 58.9038 8.72805C58.9038 6.11319 61.0493 3.97971 63.686 3.97971ZM63.686 5.34567C61.8635 5.34567 60.3901 6.85472 60.3901 8.72805C60.3901 10.6014 61.8635 12.1105 63.686 12.1105C65.5085 12.1105 66.9816 10.6014 66.9816 8.72805C66.9816 6.85472 65.5085 5.34567 63.686 5.34567Z" fill="#11141A" class="dark:fill-white"></path><path d="M141.886 3.97971C144.522 3.97971 146.668 6.11319 146.668 8.72805C146.668 11.3429 144.522 13.4764 141.886 13.4764C139.249 13.4764 137.104 11.3429 137.104 8.72805C137.104 6.11319 139.249 3.97971 141.886 3.97971ZM141.886 5.34567C140.063 5.34567 138.59 6.85472 138.59 8.72805C138.59 10.6014 140.063 12.1105 141.886 12.1105C143.708 12.1105 145.181 10.6014 145.181 8.72805C145.181 6.85472 143.708 5.34567 141.886 5.34567Z" fill="#11141A" class="dark:fill-white"></path><path d="M163.667 4.17484H164.83L164.895 4.23987V7.36208L168.578 4.23987L168.707 4.17484H170.388L170.452 4.23987L165.864 8.0776L170.969 13.2162L170.904 13.2813H169.224L169.095 13.2162L164.895 8.92319V13.2162L164.83 13.2813H163.667L163.602 13.2162V4.23987L163.667 4.17484Z" fill="#11141A" class="dark:fill-white"></path><path d="M108.823 4.17484H115.931L115.996 4.23987V5.4107L115.931 5.47577H113.023V13.2162L112.959 13.2813H111.796L111.731 13.2162V5.47577H108.823L108.758 5.4107V4.23987L108.823 4.17484Z" fill="#11141A" class="dark:fill-white"></path><path d="M120.48 4.17484H121.773L121.837 4.23987L123.905 11.1348L125.909 4.36997L125.973 4.30494H127.266L127.331 4.36997L129.333 11.1348L131.402 4.23987L131.466 4.17484H132.759L132.823 4.23987L130.045 13.2162L129.98 13.2813H128.752L128.687 13.2162L126.619 6.51649L124.552 13.2162L124.487 13.2813H123.259L123.194 13.2162L120.416 4.23987L120.48 4.17484Z" fill="#11141A" class="dark:fill-white"></path><path d="M89.4004 11.8059L83.6375 4.49792H82.3037V13.4936H83.6375V6.19345L89.4004 13.4936H90.7264V4.49792H89.4004V11.8059Z" fill="#11141A" class="dark:fill-white"></path><path d="M157.746 9.38414C157.858 9.2953 157.955 9.19841 158.035 9.10953C158.476 8.60881 158.717 7.9385 158.717 7.23583C158.717 5.8709 157.778 4.49792 155.973 4.49792H150.822V13.7615H152.193V5.64478H155.973C157.08 5.64478 157.569 6.44433 157.569 7.22774C157.569 7.64772 157.425 8.05156 157.176 8.33421C156.912 8.63303 156.543 8.80266 156.077 8.81879H154.649H152.587V9.96565H155.331L157.586 13.7454H159.014L156.711 9.87681C157.16 9.7718 157.497 9.57799 157.746 9.368V9.38414Z" fill="#11141A" class="dark:fill-white"></path><path opacity="0.1" fill-rule="evenodd" clip-rule="evenodd" d="M7.1855 13.6256C6.42963 13.6256 5.69833 13.5223 5.00391 13.3279C5.08574 14.1893 5.24949 15.0437 5.49507 15.8802C8.03275 15.2642 10.3426 13.9233 12.1395 12.0105L12.1012 11.9705C10.7314 13.0096 9.03007 13.6256 7.18414 13.6256H7.1855Z" fill="black" class="dark:fill-white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11.5687 2.24908L7.71304 0C6.58745 1.3726 5.74155 2.93676 5.20264 4.59875C8.16872 5.22444 10.7896 6.7996 12.7379 8.99772C13.8936 10.3014 14.8118 11.8228 15.4257 13.4931V4.49818H15.4244L11.5701 2.24908H11.5687Z" fill="url(#paint0_linear_9_291)" class="dark:fill-white"></path><path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M6.54053 1.66239C6.54861 1.64855 6.55797 1.63472 6.56601 1.62088L6.54053 1.66239Z" fill="#A4A4A4" class="dark:fill-white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M5.19819 13.3899C3.50365 13.7496 1.73955 13.7923 0 13.4933L3.85702 15.7423L7.71404 17.9914L11.5697 15.7423L15.4267 13.4933C14.8128 11.8216 13.8946 10.3002 12.739 8.99783C10.7197 11.28 8.05785 12.7849 5.20091 13.3899H5.19819Z" fill="url(#paint1_linear_9_291)" class="dark:fill-white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0 4.49891V13.4952C1.73955 13.7942 3.50366 13.7502 5.19819 13.3919C4.25131 10.484 4.29226 7.40396 5.20091 4.60089C5.74119 2.93887 6.58572 1.37471 7.71132 0.00210571L3.85429 2.25119L0 4.49891Z" fill="url(#paint2_linear_9_291)" class="dark:fill-white"></path><path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M2.12738 7.83319C1.62257 9.7336 1.51069 11.736 1.80539 13.6819C2.94872 13.7246 4.08795 13.6254 5.19852 13.3898C4.25168 10.4819 4.29259 7.40186 5.20128 4.59875C5.74156 2.93676 6.5861 1.3726 7.71169 0C4.87383 1.85081 2.96509 4.6773 2.12738 7.83319Z" fill="url(#paint3_linear_9_291)" class="dark:fill-white"></path></g><defs><linearGradient id="paint0_linear_9_291" x1="17.0861" y1="12.1081" x2="6.04798" y2="0.0316813" gradientUnits="userSpaceOnUse"><stop stop-color="#11171F"></stop><stop offset="1" stop-color="#47484A"></stop></linearGradient><linearGradient id="paint1_linear_9_291" x1="16.4923" y1="11.3779" x2="-0.355658" y2="16.9553" gradientUnits="userSpaceOnUse"><stop stop-color="#11171F"></stop><stop offset="1" stop-color="#47484A"></stop></linearGradient><linearGradient id="paint2_linear_9_291" x1="0.34791" y1="15.2537" x2="6.01552" y2="-0.315784" gradientUnits="userSpaceOnUse"><stop stop-color="#11171F"></stop><stop offset="1" stop-color="#47484A"></stop></linearGradient><linearGradient id="paint3_linear_9_291" x1="4.67811" y1="0" x2="4.67811" y2="13.6916" gradientUnits="userSpaceOnUse"><stop stop-color="#11171F"></stop><stop offset="1" stop-color="#47484A" stop-opacity="0.49"></stop></linearGradient><clipPath id="clip0_9_291"><rect width="171" height="18" fill="white"></rect></clipPath></defs></svg></a></div><div class="flex items-center gap-5"><nav class="hidden md:block"><ul role="list" class="flex items-center gap-8"><li><a class="text-sm leading-5 text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/">API</a></li><li><a class="text-sm leading-5 text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/solidity_tutorials#">Documentation</a></li><li><a class="text-sm leading-5 text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/solidity_tutorials#">Support</a></li></ul></nav><div class="hidden md:block md:h-5 md:w-px md:bg-zinc-900/10 md:dark:bg-white/15"></div><div class="flex gap-4"><div class="contents lg:hidden"><button type="button" class="flex h-6 w-6 items-center justify-center rounded-md transition hover:bg-zinc-900/5 dark:hover:bg-white/5 lg:hidden focus:[&amp;:not(:focus-visible)]:outline-none" aria-label="Find something..."><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="h-5 w-5 stroke-zinc-900 dark:stroke-white"><path stroke-linecap="round" stroke-linejoin="round" d="M12.01 12a4.25 4.25 0 1 0-6.02-6 4.25 4.25 0 0 0 6.02 6Zm0 0 3.24 3.25"></path></svg></button></div><button type="button" class="flex h-6 w-6 items-center justify-center rounded-md transition hover:bg-zinc-900/5 dark:hover:bg-white/5" aria-label="Toggle dark mode"><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="h-5 w-5 stroke-zinc-900 dark:hidden"><path d="M12.5 10a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z"></path><path stroke-linecap="round" d="M10 5.5v-1M13.182 6.818l.707-.707M14.5 10h1M13.182 13.182l.707.707M10 15.5v-1M6.11 13.889l.708-.707M4.5 10h1M6.11 6.111l.708.707"></path></svg><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="hidden h-5 w-5 stroke-white dark:block"><path d="M15.224 11.724a5.5 5.5 0 0 1-6.949-6.949 5.5 5.5 0 1 0 6.949 6.949Z"></path></svg></button></div><div class="hidden min-[416px]:contents"><a class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-full bg-zinc-900 py-1 px-3 text-white hover:bg-zinc-700 dark:bg-emerald-400/10 dark:text-emerald-400 dark:ring-1 dark:ring-inset dark:ring-emerald-400/20 dark:hover:bg-emerald-400/10 dark:hover:text-emerald-300 dark:hover:ring-emerald-300" href="/solidity_tutorials#">Sign in</a></div></div></div><nav class="hidden lg:mt-10 lg:block"><ul role="list"><li class="md:hidden"><a class="block py-1 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/">API</a></li><li class="md:hidden"><a class="block py-1 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/solidity_tutorials#">Documentation</a></li><li class="md:hidden"><a class="block py-1 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/solidity_tutorials#">Support</a></li><li class="relative mt-6 md:mt-0"><h2 class="text-xs font-semibold text-zinc-900 dark:text-white">GUIDES</h2><div class="relative mt-3 pl-2"><div class="absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"></div><ul role="list" class="border-l border-transparent"><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/"><span class="truncate">Introduction</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/industry_use_cases"><span class="truncate">Industry use cases</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/wallets"><span class="truncate">Wallets</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/staking"><span class="truncate">Staking</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/grants"><span class="truncate">Grants</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/command_line"><span class="truncate">Command Line</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/developing_native_exzo"><span class="truncate">Developing on native Exzo</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/integrating"><span class="truncate">Integrating</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/validating"><span class="truncate">Validating</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/clusters"><span class="truncate">Clusters</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/architecture"><span class="truncate">Architecture</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/software"><span class="truncate">Software</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/writing_programs"><span class="truncate">Writing Programs</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/performance_reports"><span class="truncate">Performance Reports</span></a></li></ul></div></li><li class="relative mt-6"><h2 class="text-xs font-semibold text-zinc-900 dark:text-white">TUTORIALS</h2><div class="relative mt-3 pl-2"><div class="absolute inset-x-0 top-0 bg-zinc-800/2.5 will-change-transform dark:bg-white/2.5" style="border-radius:8px;height:32px;top:32px;opacity:0"></div><div class="absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"></div><div class="absolute left-2 h-6 w-px bg-emerald-500" style="top:36px;opacity:1"></div><ul role="list" class="border-l border-transparent"><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/nft_tutorials"><span class="truncate">NFT Tutorials</span></a></li><li class="relative"><a aria-current="page" class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-900 dark:text-white" href="/solidity_tutorials"><span class="truncate">Solidity Tutorials</span></a><ul role="list" style="opacity:1"><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/solidity_tutorials#deploy_tutorial"><span class="truncate">Deploy a NFT (ERC-721) Tutorial</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/solidity_tutorials#deploy_contract"><span class="truncate">Deploy a Smart Contract</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/solidity_tutorials#deploy_token"><span class="truncate">Deploy a ERC-20 Token</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/solidity_tutorials#build_marketplace"><span class="truncate">How To Build an NFT Marketplace</span></a></li></ul></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/setup_metamask_mainnet"><span class="truncate">Set up MetaMask (Mainnet)</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/setup_metamask_testnet"><span class="truncate">Set up MetaMask (Testnet)</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/wallet_metamask"><span class="truncate">Import a Wallet into MetaMask</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/create_metamask_wallet"><span class="truncate">Create new MetaMask Wallet</span></a></li></ul></div></li><li class="relative mt-6"><h2 class="text-xs font-semibold text-zinc-900 dark:text-white">LINKS</h2><div class="relative mt-3 pl-2"><div class="absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"></div><ul role="list" class="border-l border-transparent"><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/smart_contract_audits"><span class="truncate">Smart Contract Audits</span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/links"><span class="truncate">Links</span></a></li></ul></div></li><li class="relative mt-6"><h2 class="text-xs font-semibold text-zinc-900 dark:text-white">POLICIES AND DIACLAIMERS</h2><div class="relative mt-3 pl-2"><div class="absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"></div><ul role="list" class="border-l border-transparent"><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/disclaimer"><span class="truncate">Disclaimer</span></a></li></ul></div></li><li class="sticky bottom-0 z-10 mt-6 min-[416px]:hidden"><a class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-full bg-zinc-900 py-1 px-3 text-white hover:bg-zinc-700 dark:bg-emerald-500 dark:text-white dark:hover:bg-emerald-400 w-full" href="/solidity_tutorials#">Sign in</a></li></ul></nav></div></header><div class="relative px-4 pt-14 sm:px-6 lg:px-8"><main class="py-16"><article class="prose dark:prose-invert"><h1 class="border-b border-zinc-900/5 dark:border-white/5 xl:max-w-none pb-5 mb-7">Solidity Tutorials</h1>
<div class="xl:max-w-none"><h2 id="deploy_tutorial" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#deploy_tutorial">Deploy a NFT (ERC-721) Tutorial</a></h2><div class="not-prose mt-4 grid grid-cols-1 gap-8 border-t border-zinc-900/5 pt-4 dark:border-white/5 sm:grid-cols-2 xl:grid-cols-4"></div></div>
<p>An ERC-721 token is a type of non-fungible token (NFT) on the Ethereum blockchain, defined by the Ethereum Request for Comments 721 (ERC-721) standard.</p>
<h2 id="background" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#background">Background</a></h2>
<p>An ERC-721 token is a type of non-fungible token (NFT) on the Ethereum blockchain, defined by the Ethereum Request for Comments 721 (ERC-721) standard. It represents unique digital assets, such as digital art, virtual real estate, collectibles, and digital goods. The standard defines a set of rules and interfaces for managing and transferring NFTs on the Ethereum network.</p>
<p>Unlike ERC-20 tokens, which are fungible and interchangeable, ERC-721 tokens are non-fungible, meaning each token has a unique value and is not interchangeable with other tokens. Each ERC-721 token has a unique identifier (Token ID) and can be associated with specific metadata, such as descriptions, images, or other information related to the digital asset.</p>
<p>The ERC-721 standard includes functions for:</p>
<ol>
<li>Token ownership management: These functions allow users to check the ownership of a token, transfer ownership, and approve others to transfer the token on their behalf.</li>
<li>Token metadata management: These functions help manage metadata associated with each token, such as token URI, which can be used to store information about the digital asset.</li>
<li>Enumeration: These functions enable enumeration of owned tokens, providing a way to count and list tokens owned by a specific address.</li>
</ol>
<p>By implementing the ERC-721 standard, developers can create NFTs with unique properties and ensure compatibility with various wallets, marketplaces, and platforms that support this standard.</p>
<p>Creating an ERC-721 NFT Smart Contract involves several steps. Here&#x27;s a detailed guide to help you create one using Solidity and the Ethereum network:</p>
<h2 id="set-up-your-environment" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#set-up-your-environment">Set up your environment</a></h2>
<h3>To begin, you will need the following tools:</h3>
<ul>
<li><a href="https://nodejs.org/en/download">Node.js</a> (v8.9.4 or later)</li>
<li><a href="https://trufflesuite.com/docs/truffle/how-to/install/">Truffle</a> (v5.x.x)</li>
<li><a href="https://trufflesuite.com/ganache/">Ganache</a> (for local blockchain deployment)</li>
<li>A text editor or IDE (e.g., <a href="https://code.visualstudio.com/download">Visual Studio Code</a>)</li>
</ul>
<h3>To install Truffle, use the following command:</h3>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-bash"><span><span style="color: var(--shiki-color-text)">npm install -g truffle</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<h2 id="create-a-new-truffle-project" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#create-a-new-truffle-project">Create a new Truffle project</a></h2>
<h3>In your terminal, navigate to the directory where you want to create the project and run:</h3>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-bash"><span><span style="color: var(--shiki-color-text)">truffle init</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>This command will generate a new Truffle project with basic files and folders.</p>
<h2 id="install-open-zeppelin-contracts-library" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#install-open-zeppelin-contracts-library">Install OpenZeppelin Contracts library</a></h2>
<p>ERC-721 is based on the OpenZeppelin Contracts library, which offers a secure and well-tested implementation of the standard.</p>
<h3>Install the library by running:</h3>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-bash"><span><span style="color: var(--shiki-color-text)">npm install @openzeppelin/contracts</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<h2 id="create-an-erc-721-smart-contract" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#create-an-erc-721-smart-contract">Create an ERC-721 smart contract</a></h2>
<p>In your Truffle project, navigate to the <code>contracts</code> folder and create a new file called <code>MyNFT.sol</code>.</p>
<h3>Add the following code:</h3>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-color-text)">pragma solidity </span><span style="color: var(--shiki-token-keyword)">^</span><span style="color: var(--shiki-token-constant)">0.8</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;@openzeppelin/contracts/token/ERC721/ERC721.sol&quot;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;@openzeppelin/contracts/utils/Counters.sol&quot;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">contract MyNFT is </span><span style="color: var(--shiki-token-constant)">ERC721</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    using Counters for </span><span style="color: var(--shiki-token-constant)">Counters</span><span style="color: var(--shiki-color-text)">.Counter;</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">Counters</span><span style="color: var(--shiki-color-text)">.Counter private _tokenIds;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">constructor</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-function)">ERC721</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;MyNFT&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;MNFT&quot;</span><span style="color: var(--shiki-color-text)">) {}</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">mintNFT</span><span style="color: var(--shiki-color-text)">(address recipient</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> string memory tokenURI) </span><span style="color: var(--shiki-token-function)">public</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256) {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-constant)">_tokenIds</span><span style="color: var(--shiki-token-function)">.increment</span><span style="color: var(--shiki-color-text)">();</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 newItemId </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">_tokenIds</span><span style="color: var(--shiki-token-function)">.current</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">_mint</span><span style="color: var(--shiki-color-text)">(recipient</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> newItemId);</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">_setTokenURI</span><span style="color: var(--shiki-color-text)">(newItemId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenURI);</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> newItemId;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>This code imports the necessary libraries and creates a basic ERC-721 NFT smart contract called <code>MyNFT</code>. The <code>mintNFT</code> function allows you to mint new NFTs and assign a <code>tokenURI</code> for metadata.</p>
<h2 id="deploy-the-smart-contract" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#deploy-the-smart-contract">Deploy the smart contract</a></h2>
<p>Create a new file in the <code>migrations</code> folder named <code>2_deploy_contract.js</code> and add the following code:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">MyNFT</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">artifacts</span><span style="color: var(--shiki-token-function)">.require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;MyNFT&#39;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> (deployer) {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">deployer</span><span style="color: var(--shiki-token-function)">.deploy</span><span style="color: var(--shiki-color-text)">(MyNFT)</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>This code tells Truffle how to deploy the smart contract to the Ethereum network.</p>
<h2 id="compile-and-deploy-the-contract" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#compile-and-deploy-the-contract">Compile and deploy the contract</a></h2>
<p>Start Ganache and make sure you have a local blockchain running. In your terminal, compile the contract using:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-bash"><span><span style="color: var(--shiki-color-text)">truffle compile</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Once compiled, deploy the contract to the local blockchain with:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-bash"><span><span style="color: var(--shiki-color-text)">truffle migrate</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<h2 id="interact-with-the-smart-contract" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#interact-with-the-smart-contract">Interact with the smart contract</a></h2>
<p>You can interact with the smart contract using Truffle console, web3.js, or other tools like the Exzo Wallet Chrome extension and <a href="https://remix.ethereum.org/">Remix IDE</a>.</p>
<p>To use the Truffle console, run:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-bash"><span><span style="color: var(--shiki-color-text)">truffle console</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Inside the console, you can mint an NFT:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> instance </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">MyNFT</span><span style="color: var(--shiki-token-function)">.deployed</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">instance</span><span style="color: var(--shiki-token-function)">.mintNFT</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;0xYourAddress&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;https://your-token-uri.com/&#39;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Replace &quot;0xYourAddress&quot; with the recipient&#x27;s Ethereum address and &quot;<a href="https://your-token-uri.com/">https://your-token-uri.com/</a>&quot; with the actual token URI.</p>
<p>You can utilize <a href="https://www.pinata.cloud/">Pinata</a> to upload the images of your NFT and their metadata, which is in JSON format.</p>
<p>To learn more about the recommended metadaa structure you can vieew the OpenSea metadata guidelines <a href="https://docs.opensea.io/docs/metadata-standards">here</a>.</p>
<p>Below is an example of a metadata JSON file structure</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-json"><span><span style="color: var(--shiki-color-text)">{</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;description&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;Friendly OpenSea Creature that enjoys long swims in the ocean.&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;external_url&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;https://openseacreatures.io/3&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;image&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;https://storage.googleapis.com/opensea-prod.appspot.com/puffs/3.png&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;name&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;Dave Starbelly&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;attributes&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> [</span></span>
<span><span style="color: var(--shiki-color-text)">	{</span></span>
<span><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">&quot;trait_type&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;Background&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">&quot;value&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;Green&quot;</span></span>
<span><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">	{</span></span>
<span><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">&quot;trait_type&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;Head&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">&quot;value&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;Hat&quot;</span></span>
<span><span style="color: var(--shiki-color-text)">	}</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">	{</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;trait_type&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;Level&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;display_type&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;number&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;value&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">10</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span></span>
<span><span style="color: var(--shiki-color-text)">	...</span></span>
<span><span style="color: var(--shiki-color-text)">]</span></span>
<span><span style="color: var(--shiki-color-text)">...</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Now you have a basic understanding of creating an ERC-721 NFT smart contract using Solidity, Truffle, and the OpenZeppelin Contracts library. You can expand the functionality by adding more features such as royalty payments, access.</p>
<p>Make sure to always get your code audited before deploying it live. A good resource for quick auditing is <a href="https://solidityscan.com/">SolidityScan</a>.</p>
<p>This tutorial is for informational purposes only. We did not have the code audited and do not take ownership of any of the code associated with this tutorial.</p>
<div class="xl:max-w-none"><h2 id="deploy_contract" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#deploy_contract">Deploy a Smart Contract</a></h2><div class="not-prose mt-4 grid grid-cols-1 gap-8 border-t border-zinc-900/5 pt-4 dark:border-white/5 sm:grid-cols-2 xl:grid-cols-4"></div></div>
<p>Exzo Network utilizes the Ethereum Virtual Machine (EVM) in the backend. Smart contracts are written in Solidity and they can function on the Exzo Network as they do on Ethereum.</p>
<p>To deploy a smart contract, you send a Exzo Network transaction containing your bytecode without specifying any recipients.</p>
<p>After the contract is deployed, it will be available to all users of the Exzo Network. Smart contracts have a Fantom address like other accounts.</p>
<h2 id="requirements" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#requirements">Requirements</a></h2>
<ul>
<li>Bytecode (compiled code) of your smart contract</li>
<li>Exzo (XZO) for gas costs</li>
<li>Deployment script/plugin</li>
<li>Access to a Exzo Network node, either by running your own node or API access to a node.</li>
</ul>
<h2 id="tools" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#tools">Tools</a></h2>
<ul>
<li>Bytecode (compiled code) of your smart contract</li>
<li>Access to a Exzo Network node, either by running your own node or API access to a node.</li>
<li><a href="https://www.trufflesuite.com">Truffle</a>: Development environment, testing framework and asset pipeline for blockchains using the EVM</li>
<li><a href="https://remix.ethereum.org/">Remix</a>: IDE that’s used to write, compile, debug &amp; deploy Solidity code ll in your browser.</li>
<li><a href="https://solidity.readthedocs.io">Solidity</a>: Solidity is an object-oriented, high-level language for implementing smart contracts.</li>
<li><a href="https://github.com/OpenZeppelin/openzeppelin-contracts">OpenZeppelin</a>: OpenZeppelin Contracts helps you minimize risk by using battle-tested libraries of smart contracts for Ethereum and other blockchains.</li>
</ul>
<div class="xl:max-w-none"><h2 id="deploy_token" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#deploy_token">Deploy a ERC-20 Token</a></h2><div class="not-prose mt-4 grid grid-cols-1 gap-8 border-t border-zinc-900/5 pt-4 dark:border-white/5 sm:grid-cols-2 xl:grid-cols-4"></div></div>
<p>This is a tutorial on how to deploy an ERC-20 token smart contract on the Exzo Network using the Solidity programming language.</p>
<p>One of the most significant smart contract standards on Exzo Network is known as ERC-20, which has emerged as the technical standard used for all smart contracts on the Ethereum blockchain for fungible token implementations.</p>
<p>ERC-20 defines a common list of rules that all fungible Exzo Network tokens should adhere to. Consequently, this token standard empowers developers of all types to accurately predict how new tokens will function within the larger Exzo Network system. This simplifies and eases developers’ tasks, because they can proceed with their work, knowing that each and every new project won’t need to be redone every time a new token is released, as long as the token follows the rules.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-color-text)">pragma solidity </span><span style="color: var(--shiki-token-keyword)">^</span><span style="color: var(--shiki-token-constant)">0.6</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">interface</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">IERC20</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">totalSupply</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256);</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">balanceOf</span><span style="color: var(--shiki-color-text)">(address account) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256);</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">allowance</span><span style="color: var(--shiki-color-text)">(address owner</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address spender) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256);</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">transfer</span><span style="color: var(--shiki-color-text)">(address recipient</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 amount) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool);</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">approve</span><span style="color: var(--shiki-color-text)">(address spender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 amount) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool);</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">transferFrom</span><span style="color: var(--shiki-color-text)">(address sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address recipient</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 amount) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool);</span></span>
<span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    event </span><span style="color: var(--shiki-token-function)">Transfer</span><span style="color: var(--shiki-color-text)">(address indexed from</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address indexed to</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 value);</span></span>
<span><span style="color: var(--shiki-color-text)">    event </span><span style="color: var(--shiki-token-function)">Approval</span><span style="color: var(--shiki-color-text)">(address indexed owner</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address indexed spender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 value);</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Here is a line-by-line explainer of what every function is for. After this we’ll present a simple implementation of the ERC-20 token.</p>
<h2 id="getters" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#getters">Getters</a></h2>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">totalSupply</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256);</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>The ERC-20 standard allows an address to give an allowance to another address to be able to retrieve tokens from it. This getter returns the remaining number of tokens that the <code>spender</code> will be allowed to spend on behalf of <code>owner</code>. This function is a getter and does not modify the state of the contract and should return 0 by default</p>
<h2 id="functions" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#functions">FUNCTIONS</a></h2>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">transfer</span><span style="color: var(--shiki-color-text)">(address recipient</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 amount) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool);</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Moves the <code>amount</code> of tokens from the function caller address (<code>msg.sender</code>) to the recipient address. This function emits the <code>Transfer</code> event defined later. It returns true if the transfer was possible.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">approve</span><span style="color: var(--shiki-color-text)">(address spender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 amount) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool);</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Set the amount of <code>allowance</code> the <code>spender</code> is allowed to transfer from the function caller (<code>msg.sender</code>) balance. This function emits the Approval event. The function returns whether the allowance was successfully set.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">transferFrom</span><span style="color: var(--shiki-color-text)">(address sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address recipient</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 amount) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool);</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Moves the <code>amount</code> of tokens from <code>sender</code> to <code>recipient</code> using the allowance mechanism. amount is then deducted from the caller’s allowance. This function emits the <code>Transfer</code> event.</p>
<h2 id="events" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#events">EVENTS</a></h2>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-color-text)">event </span><span style="color: var(--shiki-token-function)">Transfer</span><span style="color: var(--shiki-color-text)">(address indexed from</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address indexed to</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 value);</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>This event is emitted when the amount of tokens (value) is sent from the <code>from</code> address <code>to</code> the to address.</p>
<p>In the case of minting new tokens, the transfer is usually <code>from</code> the 0x00..0000 address while in the case of burning tokens the transfer is <code>to</code> 0x00..0000.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-color-text)">event </span><span style="color: var(--shiki-token-function)">Approval</span><span style="color: var(--shiki-color-text)">(address indexed owner</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address indexed spender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 value);</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>This event is emitted when the amount of tokens (<code>value</code>) is approved by the <code>owner</code> to be used by the <code>spender</code>.</p>
<h2 id="a-basic-implementation-of-erc-20-tokens" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#a-basic-implementation-of-erc-20-tokens">A BASIC IMPLEMENTATION OF ERC-20 TOKENS</a></h2>
<p>Here is the most simple code to base your ERC-20 token from:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-color-text)">pragma solidity </span><span style="color: var(--shiki-token-keyword)">^</span><span style="color: var(--shiki-token-constant)">0.8</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">interface</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">IERC20</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">totalSupply</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256);</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">balanceOf</span><span style="color: var(--shiki-color-text)">(address account) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256);</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">allowance</span><span style="color: var(--shiki-color-text)">(address owner</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address spender) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256);</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">transfer</span><span style="color: var(--shiki-color-text)">(address recipient</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 amount) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool);</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">approve</span><span style="color: var(--shiki-color-text)">(address spender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 amount) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool);</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">transferFrom</span><span style="color: var(--shiki-color-text)">(address sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address recipient</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 amount) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool);</span></span>
<span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    event </span><span style="color: var(--shiki-token-function)">Transfer</span><span style="color: var(--shiki-color-text)">(address indexed from</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address indexed to</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 value);</span></span>
<span><span style="color: var(--shiki-color-text)">    event </span><span style="color: var(--shiki-token-function)">Approval</span><span style="color: var(--shiki-color-text)">(address indexed owner</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address indexed spender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 value);</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">contract ERC20Basic is </span><span style="color: var(--shiki-token-constant)">IERC20</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    string public constant name </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;ERC20Basic&quot;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-color-text)">    string public constant symbol </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;ERC&quot;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-color-text)">    uint8 public constant decimals </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">18</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">mapping</span><span style="color: var(--shiki-color-text)">(address </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> uint256) balances;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">mapping</span><span style="color: var(--shiki-color-text)">(address </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">mapping</span><span style="color: var(--shiki-color-text)"> (address </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> uint256)) allowed;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    uint256 totalSupply_ </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">10</span><span style="color: var(--shiki-color-text)"> ether;</span></span>
<span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">   </span><span style="color: var(--shiki-token-function)">constructor</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span><span style="color: var(--shiki-color-text)">    balances[</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> totalSupply_;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">totalSupply</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-function)">public</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">override</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256) {</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> totalSupply_;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">balanceOf</span><span style="color: var(--shiki-color-text)">(address tokenOwner) </span><span style="color: var(--shiki-token-function)">public</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">override</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256) {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> balances[tokenOwner];</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">transfer</span><span style="color: var(--shiki-color-text)">(address receiver</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 numTokens) </span><span style="color: var(--shiki-token-function)">public</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">override</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool) {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(numTokens </span><span style="color: var(--shiki-token-keyword)">&lt;=</span><span style="color: var(--shiki-color-text)"> balances[</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender]);</span></span>
<span><span style="color: var(--shiki-color-text)">        balances[</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> balances[</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender]</span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)">numTokens;</span></span>
<span><span style="color: var(--shiki-color-text)">        balances[receiver] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> balances[receiver]</span><span style="color: var(--shiki-token-keyword)">+</span><span style="color: var(--shiki-color-text)">numTokens;</span></span>
<span><span style="color: var(--shiki-color-text)">        emit </span><span style="color: var(--shiki-token-function)">Transfer</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> receiver</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> numTokens);</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">approve</span><span style="color: var(--shiki-color-text)">(address delegate</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 numTokens) </span><span style="color: var(--shiki-token-function)">public</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">override</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool) {</span></span>
<span><span style="color: var(--shiki-color-text)">        allowed[</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender][delegate] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> numTokens;</span></span>
<span><span style="color: var(--shiki-color-text)">        emit </span><span style="color: var(--shiki-token-function)">Approval</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> delegate</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> numTokens);</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">allowance</span><span style="color: var(--shiki-color-text)">(address owner</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address delegate) </span><span style="color: var(--shiki-token-function)">public</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">override</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint) {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> allowed[owner][delegate];</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">transferFrom</span><span style="color: var(--shiki-color-text)">(address owner</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> address buyer</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 numTokens) </span><span style="color: var(--shiki-token-function)">public</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">override</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (bool) {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(numTokens </span><span style="color: var(--shiki-token-keyword)">&lt;=</span><span style="color: var(--shiki-color-text)"> balances[owner]);</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(numTokens </span><span style="color: var(--shiki-token-keyword)">&lt;=</span><span style="color: var(--shiki-color-text)"> allowed[owner][</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender]);</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">        balances[owner] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> balances[owner]</span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)">numTokens;</span></span>
<span><span style="color: var(--shiki-color-text)">        allowed[owner][</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> allowed[owner][</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender]</span><span style="color: var(--shiki-token-keyword)">-</span><span style="color: var(--shiki-color-text)">numTokens;</span></span>
<span><span style="color: var(--shiki-color-text)">        balances[buyer] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> balances[buyer]</span><span style="color: var(--shiki-token-keyword)">+</span><span style="color: var(--shiki-color-text)">numTokens;</span></span>
<span><span style="color: var(--shiki-color-text)">        emit </span><span style="color: var(--shiki-token-function)">Transfer</span><span style="color: var(--shiki-color-text)">(owner</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> buyer</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> numTokens);</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<div class="xl:max-w-none"><h2 id="build_marketplace" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#build_marketplace">How To Build an NFT Marketplace</a></h2><div class="not-prose mt-4 grid grid-cols-1 gap-8 border-t border-zinc-900/5 pt-4 dark:border-white/5 sm:grid-cols-2 xl:grid-cols-4"></div></div>
<p><a href="https://chain.link/education/nfts">Non-Fungible</a> Tokens (NFTs) have captured the imagination of the <a href="https://chain.link/education/web3">Web3</a> community. While the most powerful NFT use cases might still be to come, this technology is already transforming digital ownership, identity, creative expression, and community membership.</p>
<p>Because NFTs are digital assets that can be bought, sold, or traded, NFT marketplaces play an important role in holding inventory and connecting buyers and sellers.</p>
<p>In this blog, we are going to build the “backend” of an NFT marketplace using Solidity. We’ll go through the process for building the smart contracts that hold the business logic for our NFT marketplace step-by-step. In practice, this means creating a single NftMarketplace.sol smart contract and a sample <a href="https://eips.ethereum.org/EIPS/eip-721">ERC721-compliant token</a> (NFT) contract which we can use to list on our marketplace.</p>
<p>This blog is intended for those with some coding experience. If you’re comfortable with basic JavaScript, you will be able to follow along. It would also help to have some familiarity with common Ethereum terminology, which you can brush up on by taking a look through <a href="https://ethereum.org/en/glossary/">this glossary</a>.</p>
<p>The marketplace will have the following basic operations:</p>
<ul>
<li>List the NFT.</li>
<li>Update and cancel the listing.</li>
<li>Buy the NFT (transfer ownership).</li>
<li>Get a listing.</li>
<li>Get a seller’s proceeds.</li>
</ul>
<p>These operations will be implemented on the marketplace smart contract. It’s recommended that you take a moment to understand the above operations because the coding logic for them naturally comes from analyzing the inputs and outputs for each.</p>
<p>For example, what data do we need to list an NFT on the marketplace? We would need the token ID for sure. Since this is a marketplace that can list multiple unrelated NFTs, we would also need the contract address for each “family” of NFTs. Additionally, since we are listing NFTs for sale, we need to be able to add the price of each token as well.</p>
<p>We will go deeper into defining our function signatures shortly, but first let’s get our project and environment set up.</p>
<p>If you’d like to see the reference repo for this project, you can find it <a href="https://github.com/ExzoNetwork/nft-marketplace-tutorial">here</a>. It goes more in-depth than what we will cover here, so it’s useful if you want to dive deeper into this project.</p>
<h2 id="project-setup" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#project-setup">Project Setup</a></h2>
<p>We will use yarn, so run <code>npm install -g yarn</code> on your machine to install it globally. You’ll also need to make sure you have <a href="https://nodejs.org/en/">nodeJS runtime</a> on your machine too, so check you have it installed by running <code>node –version</code>.</p>
<p>We are going to use the <a href="http://hardhat.org/">Hardhat</a> Ethereum development environment to compile, deploy, test, and interact with our smart contracts, so take a moment to read through the Hardhat <a href="https://hardhat.org/getting-started/">Getting Started guide</a>.</p>
<p>We will refer to your project directory in paths as <code>&lt;&lt;root&gt;&gt;</code>, so open up the terminal app and cd into your root directory, then open up your IDE (you can use any IDE you’re comfortable with that supports Javascript). Create a <code>package.json</code> file in your project directory and paste the content from <a href="https://github.com/ExzoNetwork/nft-marketplace-tutorial">here</a>. You’ll see that it contains the <a href="https://en.wikipedia.org/wiki/Npm_(software)">NPM</a> dependency packages, including those referred in Hardhat’s Getting Started guide. Then run <code>yarn install</code> to install all the project dependencies. When the installation is complete you should see a node_modules folder inside your project root. This contains all your dependencies, including Hardhat.</p>
<p>In this tutorial we will develop on Hardhat’s local blockchain network, which means we aren’t interacting with testnets or the Ethereum mainnet. When you’re ready to test on a testnet like Rinkeby, follow these steps from the <a href="https://github.com/ExzoNetwork/nft-marketplace-tutorial">repo’s README</a>.</p>
<p>In your project root, run <code>/&lt;&lt;root&gt;&gt;</code> yarn hardhat to initialize Hardhat and select option 4: “Create an empty hardhat.config.js”.</p>
<img alt="image" loading="lazy" width="750" height="390" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FCreating-Empty-Hardhat-Config.2f6118a3.webp&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FCreating-Empty-Hardhat-Config.2f6118a3.webp&amp;w=1920&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FCreating-Empty-Hardhat-Config.2f6118a3.webp&amp;w=1920&amp;q=75"/>
<p class="text-center">Creating empty Hardhat config</p>
<p>Once the Hardhat initialization is done, you will have an empty <code>hardhat.config.js</code> file in your project root. Now you have a choice: you can <a href="https://github.com/ExzoNetwork/nft-marketplace-tutorial">paste this content</a> into that file if you plan to deploy on a live testnet, because you’ll need the various constants declared in there that specify configuration details for different testnet and mainnet networks. Note that to access testnet or mainnet nodes, you will need to use an Ethereum node access provider such as <a href="http://infura.io">Infura</a>, <a href="http://alchemy.io">Alchemy</a>, or <a href="http://moralis.io">Moralis</a>. We don’t need them for this blog, but they are necessary when you decide to test on external testnets or deploy to production on mainnet.</p>
<p>Or, if you just want to follow along with this blog, you can copy and paste the config code snippet below. We will refer to this file as “Hardhat Config” going forward, and for this tutorial the important part is the exported object (<code>module.exports = {defaultNetwork: {...} }</code> ). This is the object that holds our project configuration, which defines our default, hardhat, and localhost networks.</p>
<p>For the purposes of this following along with this blog, your exported configuration object can look like this minimal config, so you can replace the exported object in that linked file with this:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;@nomiclabs/hardhat-waffle&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;@nomiclabs/hardhat-etherscan&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;hardhat-deploy&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;solidity-coverage&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;hardhat-contract-sizer&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;dotenv&quot;</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.config</span><span style="color: var(--shiki-color-text)">();</span></span>
<span></span>
<span><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">  defaultNetwork</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;hardhat&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  networks</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    hardhat</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">      chainId</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">31337</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    localhost</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">      chainId</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">31337</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  namedAccounts</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    deployer</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">      default</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// here this will by default take the first account as deployer</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// similarly on mainnet (network 1) it will take the first</span></span>
<span><span style="color: var(--shiki-color-text)">account </span><span style="color: var(--shiki-token-keyword)">as</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">deployer</span><span style="color: var(--shiki-color-text)">. </span><span style="color: var(--shiki-token-function)">Note</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">though</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">that</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">depending</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">on</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">how</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">hardhat</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">network</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">are</span></span>
<span><span style="color: var(--shiki-color-text)">configured</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> the account </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)"> on one network can be different than on another</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  solidity</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    compilers</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> [</span></span>
<span><span style="color: var(--shiki-color-text)">      {</span></span>
<span><span style="color: var(--shiki-color-text)">        version</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;0.8.7&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">      }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">      {</span></span>
<span><span style="color: var(--shiki-color-text)">        version</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;0.4.24&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">      }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    ]</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  mocha</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    timeout</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">200000</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// 200 seconds max for running tests</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">};</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Our project will have the following folders:</p>
<ul>
<li>A <code>contracts</code> folder. This holds our NFT marketplace logic and also the sample NFT contract.</li>
<li>A <code>deploy</code> folder. This is used with the hardhat-deploy plugin and houses our deployment scripts, which will deploy compiled smart contracts to the Hardhat-provided local development blockchains.</li>
<li>A <code>scripts</code> folder. This holds the scripts that we use to interact with the deployed contracts locally on our Hardhat development blockchain.</li>
</ul>
<p>Let’s get started building our marketplace.</p>
<h2 id="building-the-nft-marketplace" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#building-the-nft-marketplace">Building the NFT Marketplace</a></h2>
<p>In your project root, create a new <code>contracts</code> folder. Inside that folder, create the <code>NftMarketplace.sol</code> file (your file path will look like <code>../&lt;&lt; root &gt;&gt;/contracts/NftMarketplace.sol</code>).</p>
<p>Now let’s consider the method signatures we need in the <code>NftMarketplace</code> smart contract for the various operations we discussed above. They’re going to look like this:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">listItem</span><span style="color: var(--shiki-color-text)">(</span></span>
<span><span style="color: var(--shiki-color-text)">        address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 price</span></span>
<span><span style="color: var(--shiki-color-text)">    ) {}</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">cancelListing</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId){}</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">buyItem</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId){}</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">updateListing</span><span style="color: var(--shiki-color-text)">(</span></span>
<span><span style="color: var(--shiki-color-text)">        address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 newPrice</span></span>
<span><span style="color: var(--shiki-color-text)">    ){}</span></span>
<span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">withdrawProceeds</span><span style="color: var(--shiki-color-text)">(){} </span><span style="color: var(--shiki-token-comment)">// method caller should be withdrawer</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getListing</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId){}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>While this looks simple enough, putting together the smart contract requires a lot of careful thinking, checking, and overcoming constraints. So let’s go deeper. We also want to protect against <a href="https://blog.openzeppelin.com/reentrancy-after-istanbul">re-entrancy attacks</a> that exploit the way Ethereum smart contracts work to run repeated and undesirable execution of code—often code that transfers token ownership. A good smart contract developer must be familiar with these potential vulnerabilities.</p>
<p>In implementing the marketplace’s logic, we will use the following fields and data structures:</p>
<ul>
<li>A <code>Listing</code> struct with price and seller property variables.</li>
<li>Three <a href="https://docs.soliditylang.org/en/v0.8.13/contracts.html#events">events</a>—<code>ItemListed</code>, <code>ItemCanceled</code> and <code>ItemBought</code>.</li>
<li>Two mappings—<code>s_listings</code> and <code>s_proceeds</code>, which are the <a href="https://docs.soliditylang.org/en/v0.8.13/contracts.html#events">state variables</a> stored on the blockchain.</li>
<li>Three <a href="https://docs.soliditylang.org/en/v0.8.13/contracts.html#function-modifiers">function modifiers</a>.</li>
</ul>
<p>Don’t worry—you’ll understand each of these pieces as we continue to build our smart contract.</p>
<p>Let’s start by declaring the smart contract.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-comment)">// SPDX-License-Identifier: MIT</span></span>
<span><span style="color: var(--shiki-color-text)">pragma solidity </span><span style="color: var(--shiki-token-keyword)">^</span><span style="color: var(--shiki-token-constant)">0.8</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">7</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;@openzeppelin/contracts/token/ERC721/IERC721.sol&quot;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;@openzeppelin/contracts/security/ReentrancyGuard.sol&quot;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">contract NftMarketplace is ReentrancyGuard {</span></span>
<span><span style="color: var(--shiki-token-comment)">// TODO…</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>You’ll see that we are importing two files from <a href="https://openzeppelin.com/contracts/">OpenZeppelin</a>, which provides open-source, audited, and secure smart contract templates that can be reused. Our smart contract inherits from its <code>ReentrancyGuard</code> smart contract (<a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/security/ReentrancyGuard.sol">see it on Github</a>), which provides very valuable protections, modifiers, and methods that we can use. We must also import the <code>IERC721.sol</code> file, an interface that we will be using shortly. However, our marketplace smart contract does not implement the ERC721 token standard because it is not the token contract.</p>
<h3>Implementing <code>listItem()</code></h3>
<p>Let’s start with the <code>listItem()</code> method, the signature of which you’re already familiar with. We’ll make it an external function because it needs to be called by other contracts or by end user accounts (from the frontend web application, for example). We also want listItem() to do the following:</p>
<ul>
<li>Ensure that the item being listed is not already listed. We do this with a <a href="https://docs.soliditylang.org/en/v0.8.13/contracts.html#function-modifiers">Solidity function modifier</a>.</li>
<li>Ensure that the person listing the item (i.e. calling this method) is the owner.</li>
<li>Ensure that the token’s contract has “approved” our NFT marketplace to operate the token (to transfer it, etc.).</li>
<li>Check that the price is greater than zero wei.</li>
<li>Emit a listing event.</li>
<li>Store the listing details in the smart contract’s state (i.e. the marketplace application’s state).</li>
</ul>
<p>Now let’s write this method inside the marketplace contract.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">listItem</span><span style="color: var(--shiki-color-text)">(</span></span>
<span><span style="color: var(--shiki-color-text)">        address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 price</span></span>
<span><span style="color: var(--shiki-color-text)">    )</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">external</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">notListed</span><span style="color: var(--shiki-color-text)">(nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> msg.sender)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">isOwner</span><span style="color: var(--shiki-color-text)">(nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> msg.sender)</span></span>
<span><span style="color: var(--shiki-color-text)">    {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (price </span><span style="color: var(--shiki-token-keyword)">&lt;=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">) {</span></span>
<span><span style="color: var(--shiki-color-text)">            revert </span><span style="color: var(--shiki-token-function)">PriceMustBeAboveZero</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">        }</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-constant)">IERC721</span><span style="color: var(--shiki-color-text)"> nft </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">IERC721</span><span style="color: var(--shiki-color-text)">(nftAddress);</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">nft</span><span style="color: var(--shiki-token-function)">.getApproved</span><span style="color: var(--shiki-color-text)">(tokenId) </span><span style="color: var(--shiki-token-keyword)">!=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">address</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">)) {</span></span>
<span><span style="color: var(--shiki-color-text)">            revert </span><span style="color: var(--shiki-token-function)">NotApprovedForMarketplace</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">        }</span></span>
<span><span style="color: var(--shiki-color-text)">        s_listings[nftAddress][tokenId] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">Listing</span><span style="color: var(--shiki-color-text)">(price</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender);</span></span>
<span><span style="color: var(--shiki-color-text)">        emit </span><span style="color: var(--shiki-token-function)">ItemListed</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> price);</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<h3>Function Modifiers, Events, and State Variables</h3>
<p>Now let’s implement the <a href="https://docs.soliditylang.org/en/v0.8.13/contracts.html#function-modifiers">function modifiers</a>, <a href="https://docs.soliditylang.org/en/v0.8.13/contracts.html#events">events</a>, and application <a href="https://docs.soliditylang.org/en/v0.8.13/structure-of-a-contract.html#state-variables">state variables</a> that hold data. Look carefully at the comments below to know where to place these pieces, or refer to the <a href="https://github.com/PatrickAlphaC/hardhat-nft-marketplace-fcc/blob/main/contracts/NftMarketplace.sol">reference Github repo</a>.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-color-text)">contract NftMarketplace is ReentrancyGuard {</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    struct Listing {</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 price;</span></span>
<span><span style="color: var(--shiki-color-text)">        address seller;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">   event </span><span style="color: var(--shiki-token-function)">ItemListed</span><span style="color: var(--shiki-color-text)">(</span></span>
<span><span style="color: var(--shiki-color-text)">        address indexed seller</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        address indexed nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 indexed tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 price</span></span>
<span><span style="color: var(--shiki-color-text)">    );</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">   </span><span style="color: var(--shiki-token-comment)">// State Variables</span></span>
<span><span style="color: var(--shiki-color-text)">   </span><span style="color: var(--shiki-token-function)">mapping</span><span style="color: var(--shiki-color-text)">(address </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">mapping</span><span style="color: var(--shiki-color-text)">(uint256 </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> Listing)) private s_listings;</span></span>
<span><span style="color: var(--shiki-color-text)">   </span><span style="color: var(--shiki-token-function)">mapping</span><span style="color: var(--shiki-color-text)">(address </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> uint256) private s_proceeds;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">   </span><span style="color: var(--shiki-token-comment)">// Function modifiers</span></span>
<span><span style="color: var(--shiki-color-text)">   modifier </span><span style="color: var(--shiki-token-function)">notListed</span><span style="color: var(--shiki-color-text)">(</span></span>
<span><span style="color: var(--shiki-color-text)">        address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        address owner</span></span>
<span><span style="color: var(--shiki-color-text)">   ) {</span></span>
<span><span style="color: var(--shiki-color-text)">        Listing memory listing </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> s_listings[nftAddress][tokenId];</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">listing</span><span style="color: var(--shiki-color-text)">.price </span><span style="color: var(--shiki-token-keyword)">&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">) {</span></span>
<span><span style="color: var(--shiki-color-text)">            revert </span><span style="color: var(--shiki-token-function)">AlreadyListed</span><span style="color: var(--shiki-color-text)">(nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId);</span></span>
<span><span style="color: var(--shiki-color-text)">        }</span></span>
<span><span style="color: var(--shiki-color-text)">        _;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    modifier </span><span style="color: var(--shiki-token-function)">isOwner</span><span style="color: var(--shiki-color-text)">(</span></span>
<span><span style="color: var(--shiki-color-text)">        address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        address spender</span></span>
<span><span style="color: var(--shiki-color-text)">    ) {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-constant)">IERC721</span><span style="color: var(--shiki-color-text)"> nft </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">IERC721</span><span style="color: var(--shiki-color-text)">(nftAddress);</span></span>
<span><span style="color: var(--shiki-color-text)">        address owner </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">nft</span><span style="color: var(--shiki-token-function)">.ownerOf</span><span style="color: var(--shiki-color-text)">(tokenId);</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (spender </span><span style="color: var(--shiki-token-keyword)">!=</span><span style="color: var(--shiki-color-text)"> owner) {</span></span>
<span><span style="color: var(--shiki-color-text)">            revert </span><span style="color: var(--shiki-token-function)">NotOwner</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">        }</span></span>
<span><span style="color: var(--shiki-color-text)">        _;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">//….. Rest of smart contract …..</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>You’ll see that :</p>
<ul>
<li>The <code>Listing</code> struct holds only two pieces of information—the seller’s Ethereum account address and the listing price for the seller’s token.</li>
<li>The state variable <code>s_listings</code> is a mapping of NFT contract addresses to token IDs that themselves point to <code>Listing</code> data structs. So each listen token ID points to data that identifies the seller of that token and the price of that token.</li>
<li>The state variable <code>s_proceeds</code> is a mapping between a seller’s address and the amount they’ve earned in sales.</li>
<li>The <code>ItemListed</code> event contains useful information—the seller’s account address, token ID, token contract address, and the listed item’s price.</li>
</ul>
<p>We also add two function modifiers. <code>notListed</code> checks that the token ID is not currently listed (we don’t want to go through the compute operations of listing something that is already contained in <code>s_listings</code>). If there is such a listing, it reverts the transaction with an <code>AlreadyListed</code> error. We will implement these errors in a moment. <code>notListed</code> also takes in details about the token and then checks to see whether that listing has a non-zero price (if you remember, our <code>listItem()</code> method requires that the price must be higher than zero. It will revert with a <code>PriceMustBeAboveZero()</code> error if the condition is not met).</p>
<p>The second modifier is the <code>isOwner()</code> modifier, which checks whether the entity that calls <code>listItem()</code> actually owns that item. If not, the call to <code>listItem()</code> reverts with the <code>notOwner()</code> error.</p>
<h3>Custom Errors</h3>
<p>So let’s talk about these errors. They’re Solidity <a href="https://blog.soliditylang.org/2021/04/21/custom-errors">custom errors</a> and we haven’t implemented them yet. They are actually declared outside the main body of the smart contract. Let’s declare a bunch of them now because we’re going to use them in the marketplace functions shortly. Note that we are declaring them after the import statements but before our smart contract declaration.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;@openzeppelin/contracts/security/ReentrancyGuard.sol&quot;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">error </span><span style="color: var(--shiki-token-function)">PriceNotMet</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 price);</span></span>
<span><span style="color: var(--shiki-color-text)">error </span><span style="color: var(--shiki-token-function)">ItemNotForSale</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId);</span></span>
<span><span style="color: var(--shiki-color-text)">error </span><span style="color: var(--shiki-token-function)">NotListed</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId);</span></span>
<span><span style="color: var(--shiki-color-text)">error </span><span style="color: var(--shiki-token-function)">AlreadyListed</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId);</span></span>
<span><span style="color: var(--shiki-color-text)">error </span><span style="color: var(--shiki-token-function)">NoProceeds</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">error </span><span style="color: var(--shiki-token-function)">NotOwner</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">error </span><span style="color: var(--shiki-token-function)">NotApprovedForMarketplace</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">error </span><span style="color: var(--shiki-token-function)">PriceMustBeAboveZero</span><span style="color: var(--shiki-color-text)">();</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">contract NftMarketplace is ReentrancyGuard { … }</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Also note how custom errors may or may not take arguments. Arguments, if passed, contain useful data about the error.</p>
<p>You’ll see that our first method, the <code>listItem()</code> method, uses three of these custom errors:</p>
<ul>
<li>The <code>NotOwner()</code> error (via the <code>isOwner()</code> modifier).</li>
<li>The <code>PriceMustBeAboveZero()</code> error.</li>
<li>The <code>NotApprovedForMarketplace()</code> error.</li>
</ul>
<p>These errors get “thrown”, which in Solidity means that the execution of the surrounding function is “reverted” when certain checks and conditions fail.</p>
<h3>Implementing <code>cancelListing()</code></h3>
<p>If a token owner wants to de-list their token, it’s really a question of no longer holding that <code>Listing</code> in the application state. This means we must delete the corresponding entry from the <code>s_listings</code> state mapping. So we write the following method in after <code>listItem()</code>.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">cancelListing</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">external</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">isOwner</span><span style="color: var(--shiki-color-text)">(nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> msg.sender)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">isListed</span><span style="color: var(--shiki-color-text)">(nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId)</span></span>
<span><span style="color: var(--shiki-color-text)">    {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">delete</span><span style="color: var(--shiki-color-text)"> (s_listings[nftAddress][tokenId]);</span></span>
<span><span style="color: var(--shiki-color-text)">        emit </span><span style="color: var(--shiki-token-function)">ItemCanceled</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId);</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>This is an externally callable method, and it takes both the token’s contract address and the token ID as parameters. It uses two function modifiers to check that the caller is the owner and that the token is listed (worth checking, since we are trying to de-list an item!). We delete the listing and then we emit an event.</p>
<p>We have not implemented the <code>isOwner</code> modifier yet—we’ve only done the opposite check, <code>isNotOwner</code>! So back in the modifiers section of your code, insert the following modifier:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-color-text)">modifier </span><span style="color: var(--shiki-token-function)">isListed</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId) {</span></span>
<span><span style="color: var(--shiki-color-text)">        Listing memory listing </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> s_listings[nftAddress][tokenId];</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">listing</span><span style="color: var(--shiki-color-text)">.price </span><span style="color: var(--shiki-token-keyword)">&lt;=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">) {</span></span>
<span><span style="color: var(--shiki-color-text)">            revert </span><span style="color: var(--shiki-token-function)">NotListed</span><span style="color: var(--shiki-color-text)">(nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId);</span></span>
<span><span style="color: var(--shiki-color-text)">        }</span></span>
<span><span style="color: var(--shiki-color-text)">        _;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>If you study this, you’ll see it’s the opposite logic to <code>isNotListed</code>. This modifier reverts if the item is not listed, whereas <code>isNotListed</code> reverts if the item is listed. If that’s confusing, remember what the modifier is called—it refers to the desired condition that is being checked.</p>
<p>Now we need to also write the <code>ItemCanceled</code> event, which gets emitted in the <code>cancelListing()</code> method. But we’re going to need a bunch of events for the other methods anyway, so we might as well implement them all now and get them out of the way.</p>
<h3>The Other Events</h3>
<p>If we look at our list of operations and their function signatures, we know that we need to write <code>ItemCanceled</code> and <code>ItemBought</code> events next.</p>
<p>So, under our <code>ItemListed</code> event we insert:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-color-text)">event </span><span style="color: var(--shiki-token-function)">ItemCanceled</span><span style="color: var(--shiki-color-text)">(</span></span>
<span><span style="color: var(--shiki-color-text)">        address indexed seller</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        address indexed nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 indexed tokenId</span></span>
<span><span style="color: var(--shiki-color-text)">    );</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)"> event </span><span style="color: var(--shiki-token-function)">ItemBought</span><span style="color: var(--shiki-color-text)">(</span></span>
<span><span style="color: var(--shiki-color-text)">        address indexed buyer</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        address indexed nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 indexed tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 price</span></span>
<span><span style="color: var(--shiki-color-text)">    );</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>You’ll see that the only real difference is that one refers to the seller and the other refers to the buyer—simple enough.</p>
<p>Now let’s implement the rest of our marketplace operations.</p>
<h3>Implementing <code>BuyItem()</code></h3>
<p>This method is the heart of the marketplace. It deals directly with payment—meaning the actual exchange of an NFT for some sort of digital asset. In this case, we are going to have our marketplace accept payments in ether (<a href="https://ethdocs.org/en/latest/ether.html#denominations">denominated in wei</a>). This is also where we need the re-entrancy guard we discussed earlier to prevent a malicious account from draining all the tokens.</p>
<p>Given all this, we need to ensure the following:</p>
<ul>
<li>The <code>BuyItem()</code> is externally callable, accepts payments, and protects against re-entrancy.</li>
<li>The payment received is not less than the listing’s price.</li>
<li>The payment received is added to the seller’s proceeds.</li>
<li>The listing is deleted after the exchange of value.</li>
<li>The token is actually transferred to the buyer.</li>
<li>The right event is emitted.</li>
</ul>
<p>Note that we make an important assumption here that the seller has not de-approved the marketplace as the operator of the token. Remember that we did the approval check in the <code>ListItem()</code> method, but between listing the sale, the seller may have changed the approvals.</p>
<p>So, with all the above in mind, here’s what this method looks like:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">buyItem</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">external</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">payable</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">isListed</span><span style="color: var(--shiki-color-text)">(nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">nonReentrant</span></span>
<span><span style="color: var(--shiki-color-text)">    {</span></span>
<span><span style="color: var(--shiki-color-text)">        Listing memory listedItem </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> s_listings[nftAddress][tokenId];</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.value </span><span style="color: var(--shiki-token-keyword)">&lt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">listedItem</span><span style="color: var(--shiki-color-text)">.price) {</span></span>
<span><span style="color: var(--shiki-color-text)">            revert </span><span style="color: var(--shiki-token-function)">PriceNotMet</span><span style="color: var(--shiki-color-text)">(nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">listedItem</span><span style="color: var(--shiki-color-text)">.price);</span></span>
<span><span style="color: var(--shiki-color-text)">        }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">        s_proceeds[</span><span style="color: var(--shiki-token-constant)">listedItem</span><span style="color: var(--shiki-color-text)">.seller] </span><span style="color: var(--shiki-token-keyword)">+=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.value;</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">delete</span><span style="color: var(--shiki-color-text)"> (s_listings[nftAddress][tokenId]);</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">IERC721</span><span style="color: var(--shiki-color-text)">(nftAddress)</span><span style="color: var(--shiki-token-function)">.safeTransferFrom</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">listedItem</span><span style="color: var(--shiki-color-text)">.seller</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId);</span></span>
<span><span style="color: var(--shiki-color-text)">        emit </span><span style="color: var(--shiki-token-function)">ItemBought</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">listedItem</span><span style="color: var(--shiki-color-text)">.price);</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>In the above snippet, it’s important to note that we update the seller’s balance in <code>s_proceeds</code>. This stores the total ether the seller has received for selling their NFTs. We then call on the listed token’s contract to transfer ownership of the token to the buyer (<code>msg.sender</code> is the buyer calling this method). But we do not send the seller their proceeds. This is because we have a <code>withdrawProceeds</code> method later. This pattern “pulls” rather than “pushes” the proceeds; the principle behind the design is covered in <a href="https://fravoll.github.io/solidity-patterns/pull_over_push.html">this article</a>. In a nutshell, having the seller actively withdraw the funds is a safer operation than having our marketplace contract push it to them, as pushing it may cause execution failures that our contract cannot control. It is better to delegate the power, choice, and responsibility of transferring sales proceeds to the seller, with our contract solely responsible for storing the sale proceeds’ balance.</p>
<h3>Implementing <code>updateListing()</code></h3>
<p>This method allows a seller to update the price in their listing. This is simply a question of:</p>
<ul>
<li>Checking that the item is already listed and the caller owns the token.</li>
<li>Checking that the new price is not zero.</li>
<li>Guarding against re-entrancy.</li>
<li>Updating the <code>s_listing</code> state mapping so that the correct <code>Listing</code> data object now refers to the updated price.</li>
<li>Emitting the right event.</li>
</ul>
<p>Let’s do it!</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">updateListing</span><span style="color: var(--shiki-color-text)">(</span></span>
<span><span style="color: var(--shiki-color-text)">        address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 newPrice</span></span>
<span><span style="color: var(--shiki-color-text)">    )</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">external</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">isListed</span><span style="color: var(--shiki-color-text)">(nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">nonReentrant</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">isOwner</span><span style="color: var(--shiki-color-text)">(nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> msg.sender)</span></span>
<span><span style="color: var(--shiki-color-text)">    {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (newPrice </span><span style="color: var(--shiki-token-keyword)">==</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">) {</span></span>
<span><span style="color: var(--shiki-color-text)">            revert </span><span style="color: var(--shiki-token-function)">PriceMustBeAboveZero</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">        }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">        s_listings[nftAddress][tokenId].price </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> newPrice;</span></span>
<span><span style="color: var(--shiki-color-text)">        emit </span><span style="color: var(--shiki-token-function)">ItemListed</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> newPrice);</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<h3>Implementing <code>withdrawProceeds()</code></h3>
<p>Since we’re using the pull method as discussed when we implemented <code>BuyItem()</code>, withdrawing proceeds means simply sending the caller of the method whatever their balance in the <code>s_proceeds</code> state variable is. If a caller does not have any proceeds, we revert with a <code>NoProceeds()</code> custom error. This works if we trust that our code updates the <code>s_proceeds</code> state variable correctly, which, in our simple marketplace, it does. Importantly, we need to update the seller’s proceeds balance to zero.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">withdrawProceeds</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">        uint256 proceeds </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> s_proceeds[</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender];</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (proceeds </span><span style="color: var(--shiki-token-keyword)">&lt;=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">) {</span></span>
<span><span style="color: var(--shiki-color-text)">            revert </span><span style="color: var(--shiki-token-function)">NoProceeds</span><span style="color: var(--shiki-color-text)">();</span></span>
<span><span style="color: var(--shiki-color-text)">        }</span></span>
<span><span style="color: var(--shiki-color-text)">        s_proceeds[</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">        (bool success</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> ) </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">payable</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender).call{value</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> proceeds}(</span><span style="color: var(--shiki-token-string-expression)">&quot;&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(success</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;Transfer failed&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>In the above method, there is an unusual-looking statement:</p>
<p><code>payable(msg.sender).call{value: proceeds}(&quot;&quot;);</code> . This is how newer versions of Solidity send value to caller addresses. <code>Value</code> here refers to the amount of ether being sent, and the odd-looking <code>(“”)</code> is basically saying that the Solidity <code>call()</code> function is being called with no arguments, signified by the empty string being passed in. You can read more about this syntax <a href="https://ethereum.stackexchange.com/questions/96685/how-to-use-address-call-in-solidity">here</a>.</p>
<p>The <code>.call()</code> function returns two values, a boolean denoting success or not, and the data bytes—which we don’t use and hence don’t assign to any variable.</p>
<p>If <code>success</code> is false the entire method call reverts (is treated as an exception) by operation of <a href="https://docs.soliditylang.org/en/v0.4.25/units-and-global-variables.html#error-handling">the require() statement</a>.</p>
<h3>Implementing Utility Getter Methods</h3>
<p>Now we’re almost done with our NFT marketplace! We just need to add two more utility methods. One utility method will help us retrieve the <code>Listing</code> object associated with a specific token ID so we can find out who the seller is and how much the token is listed for. The second utility function helps us retrieve how much a seller has earned (i.e. their sales proceeds). Note that these two methods are “getter” functions for specific values in our state variables.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getListing</span><span style="color: var(--shiki-color-text)">(address nftAddress</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> uint256 tokenId)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">external</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">view</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (Listing memory)</span></span>
<span><span style="color: var(--shiki-color-text)">    {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> s_listings[nftAddress][tokenId];</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getProceeds</span><span style="color: var(--shiki-color-text)">(address seller) </span><span style="color: var(--shiki-token-function)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256) {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> s_proceeds[seller];</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>With this, our NFT marketplace is complete! Now what we need to do is write some scripts to deploy to our Hardhat local blockchain and then run some scripts to list tokens.</p>
<p>Before we go on, let’s do a quick compile check. In your terminal, from inside your project root directory, run <code>yarn hardhat compile</code>. If this works, then you’re golden. If it doesn’t, please check the error message and retrace your steps. Debugging is a critical part of the development process!</p>
<h3>Sample NFT Smart Contract</h3>
<p>But before we move on to the scripts, we need a sample NFT smart contract so that we can mint tokens and list them on our marketplace. We’ll conform to the ERC721 token spec so we can inherit from OpenZeppelin’s ERC721 library. In the reference repo there are two sample NFT contracts in <code>&lt;&lt;root&gt;&gt;/contracts/test</code>. They don’t have to be inside a test folder, but they do have to be somewhere under the <code>contracts</code> folder.</p>
<p>So let’s make our <code>BasicNft.sol</code>, which points to a cute dog picture on IPFS that will function as our token’s artwork. The NFT contract is fairly simple.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-comment)">// SPDX-License-Identifier: MIT</span></span>
<span><span style="color: var(--shiki-color-text)">pragma solidity </span><span style="color: var(--shiki-token-keyword)">^</span><span style="color: var(--shiki-token-constant)">0.8</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">7</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;@openzeppelin/contracts/token/ERC721/ERC721.sol&quot;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">contract BasicNft is </span><span style="color: var(--shiki-token-constant)">ERC721</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    string public constant </span><span style="color: var(--shiki-token-constant)">TOKEN_URI</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span></span>
<span></span>
<span><span style="color: var(--shiki-token-string-expression)">&quot;ipfs://bafybeig37ioir76s7mg5oobetncojcm3c3hxasyd4rvid4jqhy4gkaheg4/?filename=0-PUG.json&quot;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-color-text)">    uint256 private s_tokenCounter;</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    event </span><span style="color: var(--shiki-token-function)">DogMinted</span><span style="color: var(--shiki-color-text)">(uint256 indexed tokenId);</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">constructor</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-function)">ERC721</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;Dogie&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;DOG&quot;</span><span style="color: var(--shiki-color-text)">) {</span></span>
<span><span style="color: var(--shiki-color-text)">        s_tokenCounter </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">mintNft</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-function)">public</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">_safeMint</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">msg</span><span style="color: var(--shiki-color-text)">.sender</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> s_tokenCounter);</span></span>
<span><span style="color: var(--shiki-color-text)">        emit </span><span style="color: var(--shiki-token-function)">DogMinted</span><span style="color: var(--shiki-color-text)">(s_tokenCounter);</span></span>
<span><span style="color: var(--shiki-color-text)">        s_tokenCounter </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> s_tokenCounter </span><span style="color: var(--shiki-token-keyword)">+</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">tokenURI</span><span style="color: var(--shiki-color-text)">(uint256 tokenId) </span><span style="color: var(--shiki-token-function)">public</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">override</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (string memory) {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-function)">_exists</span><span style="color: var(--shiki-color-text)">(tokenId)</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;ERC721Metadata: URI query for nonexistent token&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">TOKEN_URI</span><span style="color: var(--shiki-color-text)">;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getTokenCounter</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-function)">public</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">returns</span><span style="color: var(--shiki-color-text)"> (uint256) {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> s_tokenCounter;</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Note that <code>tokenURI()</code> and <code>getTokenCounter()</code> are getters for state variables. The real logic here is in the <code>mintNft()</code> method, where we utilize the OpenZeppelin ERC721 base contract that we are inheriting from. <code>mintNft()</code> mints the token and registers the <code>msg.sender</code> (i.e. the function’s caller) as the owner of the NFT with the token ID passed in the second argument. We are using the <code>s_tokenCounter</code> state variable to track how many tokens are minted and also the token IDs. So we need to increment the counter after we emit the <code>DogMinted</code> event.</p>
<p>You can copy the second sample NFT contract, called <code>BasicNftTwo.sol</code>, from here if you want to have more than one type of NFT on your marketplace (the code in this blog refers to both, but it’s optional). You’ll see it’s pretty much the same as the <code>BasicNft.sol</code>, but the <code>TOKEN_URI</code> state variable points to a different IPFS file (a different species of dog!). Note that both contracts go into <code>&lt;&lt;root&gt;&gt;/contracts/test</code>.</p>
<p>Run <code>yarn hardhat compile</code> again to make sure everything is compiling as intended, and be sure to check that your NFT marketplace contract and your NFT contracts compile without errors.</p>
<h2 id="deployment-scripts" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#deployment-scripts">Deployment Scripts</a></h2>
<p>Now let’s start on those deployment scripts.</p>
<p>The first step is understanding what a deployment script is. Deployment scripts compile Solidity into bytecode that can then be deployed onto an EVM-compatible blockchain for execution. Live smart contracts are data stored on the blockchain, and they’re stored as bytecode. The compile step also produces a JSON artifact file that contains the <a href="https://docs.soliditylang.org/en/v0.8.12/metadata.html#contract-metadata">contract metadata</a>, which includes a bunch of useful data such as the ABI (application binary interface)—a “schema” with which we can interact with the smart contract.</p>
<p>So deployment scripts are scripts that compile our smart contracts, and deploy them to a blockchain. You can take a quick read of the <a href="https://hardhat.org/guides/deploying.html">Hardhat docs on deploying contracts</a> to grasp the principles, but we use a NPM package called “<a href="https://github.com/wighawag/hardhat-deploy">hardhat-deploy</a>” which automates some of the steps for us. It also automatically runs all the scripts that we put into a deploy folder and adds a <a href="https://hardhat.org/getting-started/#running-tasks">Hardhat task</a> called deploy to the tasks registered with Hardhat so that all we need to do is run yarn hardhat deploy to run all our scripts.</p>
<p>So let’s start with a deploy folder at the same folder hierarchy level as <code>contracts</code>, like so: <code>&lt;&lt;root&gt;&gt;/deploy</code>.</p>
<h3>Deploy <code>NftMarketplace.sol</code></h3>
<p>You can see the code below, but make sure your Hardhat config file (<code>hardhat.config.js</code>) has all the imports <a href="https://github.com/ExzoNetwork/nft-marketplace-tutorial">specified in the repo</a>. Hardhat injects a bunch of these objects into the deploy scripts. Inside the <code>deploy</code> folder, create a script <code>01-deploy-nft-marketplace.js</code>. We use the <code>01-</code> prefix to number our scripts so they get executed by hardhat-deploy in lexicographic order.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">network</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;hardhat&#39;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">developmentChains</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">VERIFICATION_BLOCK_CONFIRMATIONS</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">} </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;../helper-hardhat-config&#39;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">verify</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;../utils/verify&#39;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> ({ getNamedAccounts</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> deployments }) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">deploy</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">log</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> deployments</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">deployer</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getNamedAccounts</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">waitBlockConfirmations</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">developmentChains</span><span style="color: var(--shiki-token-function)">.includes</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">network</span><span style="color: var(--shiki-color-text)">.name)</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">?</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">VERIFICATION_BLOCK_CONFIRMATIONS</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;----------------------------------------------------&#39;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">arguments</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> []</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">nftMarketplace</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">deploy</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;NftMarketplace&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    from</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> deployer</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    args</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> arguments</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    log</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    waitConfirmations</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> waitBlockConfirmations</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  })</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// Verify the deployment</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">!</span><span style="color: var(--shiki-token-constant)">developmentChains</span><span style="color: var(--shiki-token-function)">.includes</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">network</span><span style="color: var(--shiki-color-text)">.name) </span><span style="color: var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">process</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">env</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">ETHERSCAN_API_KEY</span></span>
<span><span style="color: var(--shiki-color-text)">  ) {</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;Verifying...&#39;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">verify</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">nftMarketplace</span><span style="color: var(--shiki-color-text)">.address</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> arguments)</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;----------------------------------------------------&#39;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span>
<span><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.tags </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-string-expression)">&#39;all&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;nftmarketplace&#39;</span><span style="color: var(--shiki-color-text)">]</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>So what’s going on here? First, we import the relevant objects and items we need. The imports from <code>helper-hardhat-config</code> and <code>utils/verify</code> will be explained in a moment.</p>
<p>Then we export an asynchronous function that takes an object as an argument. This argument is the HRE (<a href="https://hardhat.org/advanced/hardhat-runtime-environment.html">Hardhat runtime environment</a>), which is a collection of useful development tools that we need to access. The HRE is also enriched by plugins, including the hardhat-deploy plugin we discussed earlier.</p>
<p>This async function does the following:</p>
<ul>
<li>Accesses utility functions to deploy contracts and log to console.</li>
<li>Pulls out the deployer index from the <code>namedAccounts</code> property in the <code>hardhat.config.js</code> file. This will default to index 0, which is the <code>deployer</code>. That is the Hardhat wallet (account) that deploys the contract (the test wallet that Hardhat gives us). This utility property is added by the hardhat-deploy package. Refer to <a href="https://github.com/wighawag/hardhat-deploy#hardhat-environment-extensions">this</a> and <a href="https://github.com/wighawag/hardhat-deploy#configuration">this</a> for details.</li>
</ul>
<p>Using the <code>deploy()</code> function from the HRE, we deploy our smart contract to the Hardhat development chain locally, and pass in a configuration object that specifies who is deploying the contract, what arguments the contracts constructor takes, and other config data.</p>
<p>You’ll also see that we import and use <code>developmentChains</code>. This is to run conditional logic, where some of the logic in this script is run depending on whether we’re on development chains, which in this case is either the <code>hardhat</code> or <code>localhost</code>. You’ll see these networks referred to in <code>hardhat.config.js</code>.</p>
<p>In our project root directory we should create a file called <code>helper-hardhat-config.js</code> and export two pieces of data from it:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">developmentChains</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-string-expression)">&#39;hardhat&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;localhost&#39;</span><span style="color: var(--shiki-color-text)">]</span></span>
<span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">VERIFICATION_BLOCK_CONFIRMATIONS</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">6</span></span>
<span></span>
<span><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> { developmentChains</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> VERIFICATION_BLOCK_CONFIRMATIONS }</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p><code>VERIFICATION_BLOCK_CONFIRMATIONS</code> refers to the number of blocks that must be added to the blockchain before we assume that a transaction (including the creation of a new smart contract) is “confirmed”.</p>
<p>If you look at our <code>01</code> script you’ll see that for development chains we only wait for one block to confirm. We only verify our smart contract on <a href="https://etherscan.io/">Etherscan</a> if we are not on a local Hardhat chain (i.e. we’re on a testnet or mainnet) and we have an Etherscan API key (you can get this on the <a href="https://etherscan.io/apis">free plan here</a>, but we don’t need it for this blog as we’re running on a local Hardhat chain). To understand the implementation of the verify() utility, Check out Hardhat’s <a href="https://hardhat.org/plugins/nomiclabs-hardhat-etherscan.html#using-programmatically">documentation</a>.</p>
<p>Though we don’t need to verify on the local network, I’ll still leave it in the scripts so you get a hang of it. So we import a <code>verify()</code> utility function, and we need to create it in order for our code to compile. We create <code>&lt;&lt;root&gt;&gt;/utils</code> folder and put <code>verify.js</code> in it. You can copy the code from <a href="https://github.com/PatrickAlphaC/hardhat-nft-marketplace-fcc/blob/main/utils/verify.js">here</a>.</p>
<p>So really, the core focus of this script is to deploy our <code>NftMarketplace.sol</code> smart contract to the local Hardhat development network. If you run <code>yarn hardhat</code> you should see that the <code>deploy</code> task is listed. If not, you need to check that your <code>hardhat.config.js</code> file and your <code>deploy</code> folder are as specified in this blog and the reference repo.</p>
<img alt="image" loading="lazy" width="750" height="512" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FThe-deploy-task-correctly-showing-in-the-terminal.c385d4bc.png&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FThe-deploy-task-correctly-showing-in-the-terminal.c385d4bc.png&amp;w=1920&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FThe-deploy-task-correctly-showing-in-the-terminal.c385d4bc.png&amp;w=1920&amp;q=75"/>
<p class="text-center">The “deploy” task correctly showing in the terminal.</p>
<p>Then simply run the task with <code>yarn hardhat deploy</code>. If you get an “Unrecognized task deploy” error, that means the configuration for <code>hardhat-deploy</code> is not correct—the deploy task will not show up in the list of available tasks as shown above.</p>
<p>But if everything is working as intended, then this should produce a message that says you’ve compiled and deployed the marketplace contract alongside a transaction hash and the Ethereum address of the deployed smart contract.</p>
<img alt="image" loading="lazy" width="750" height="100" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FNftMarketplace.5c86d4cd.webp&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FNftMarketplace.5c86d4cd.webp&amp;w=1920&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FNftMarketplace.5c86d4cd.webp&amp;w=1920&amp;q=75"/>
<p class="text-center">NftMarketplace.sol successfully deployed.</p>
<p>In case you’re wondering why it says 14 Solidity files were compiled, that’s because the Open Zeppelin libraries we depend on also need to be compiled!</p>
<h3>Deploy the NFT Contract(s)</h3>
<p>Next, we create the script <code>02-deploy-basic-nft.js</code>, which deploys the NFTs to our local development chain. You’ll notice that it looks quite familiar because both the function signature logic are the same as the NFT marketplace contract. The key difference is that we are deploying the sample NFT contracts and not the NFT marketplace contract, as the script name indicates.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">network</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;hardhat&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">developmentChains</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">VERIFICATION_BLOCK_CONFIRMATIONS</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;../helper-hardhat-config&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">verify</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;../utils/verify&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> ({ getNamedAccounts</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> deployments }) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">deploy</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">log</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> deployments</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">deployer</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getNamedAccounts</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">waitBlockConfirmations</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">developmentChains</span><span style="color: var(--shiki-token-function)">.includes</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">network</span><span style="color: var(--shiki-color-text)">.name)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">?</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">VERIFICATION_BLOCK_CONFIRMATIONS</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;----------------------------------------------------&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">args</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> []</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">basicNft</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">deploy</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;BasicNft&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">        from</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> deployer</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        args</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> args</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        log</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        waitConfirmations</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> waitBlockConfirmations</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    })</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">basicNftTwo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">deploy</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;BasicNftTwo&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">        from</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> deployer</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        args</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> args</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        log</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        waitConfirmations</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> waitBlockConfirmations</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    })</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// Verify the deployment</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">!</span><span style="color: var(--shiki-token-constant)">developmentChains</span><span style="color: var(--shiki-token-function)">.includes</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">network</span><span style="color: var(--shiki-color-text)">.name) </span><span style="color: var(--shiki-token-keyword)">&amp;&amp;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">process</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">env</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">ETHERSCAN_API_KEY</span><span style="color: var(--shiki-color-text)">) {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;Verifying...&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">verify</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">basicNft</span><span style="color: var(--shiki-color-text)">.address</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> args)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">verify</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">basicNftTwo</span><span style="color: var(--shiki-color-text)">.address</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> args)</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;----------------------------------------------------&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span>
<span><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.tags </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-string-expression)">&quot;all&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;basicnft&quot;</span><span style="color: var(--shiki-color-text)">]</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Now that you’re getting the hang of it, you know what to do next: We need to run <code>yarn hardhat deploy</code> to make sure that all our contracts deploy.</p>
<img alt="image" loading="lazy" width="750" height="100" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-run-the-deploy-task-to-compile-and-deploy-all-smart-contracts..e403fca0.png&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-run-the-deploy-task-to-compile-and-deploy-all-smart-contracts..e403fca0.png&amp;w=1920&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-run-the-deploy-task-to-compile-and-deploy-all-smart-contracts..e403fca0.png&amp;w=1920&amp;q=75"/>
<p class="text-center">Successfully run the “deploy” task to compile and deploy all smart contracts.</p>
<p>When checking the reference repo, you’ll see that there is <a href="https://github.com/PatrickAlphaC/hardhat-nft-marketplace-fcc/blob/main/deploy/03-update-front-end.js">a third script</a> in <code>&lt;&lt;root&gt;&gt;/deploy</code>.  We don’t need this right now. This script is used to copy over the ABI JSON files (after the compile step these JSON files show up in <code>&lt;&lt;root&gt;&gt;/artifacts/contracts/…</code>) into a separate directory that houses the repo for the frontend web app that presents a UI where we can begin interacting with our smart contracts. That’s out of the scope of this blog, so we don’t need to create this third script. Your <code>deploy</code> folder should only contain the two scripts we’ve covered in this blog.</p>
<h2 id="a-standalone-rpc-network" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#a-standalone-rpc-network">A Standalone RPC Network</a></h2>
<p>Before we discuss interaction scripts, let’s recap. We have written two NFT contracts and an NFT marketplace smart contract, and we’ve used deploy scripts to deploy the contracts to our local Hardhat development chain. But how do we interact with these smart contracts and check that our marketplace smart contract correctly runs the operations we discussed at the start of this blog?</p>
<p>This is where interaction scripts come in. Interaction scripts are similar to our deploy scripts in that they are written in JavaScript, but their purpose is to programmatically interact with our deployed smart contracts.</p>
<p>In order to interact with our deployed contracts, we need to work with a slightly different type of  Hardhat-provided local development chain. This time we work with the network called <code>localhost</code> which we specified in our <code>hardhat.config.js</code> file. We call this the “stand-alone network” (previously we were running the “in process” network). You can read about this in the Hardhat docs <a href="https://hardhat.org/hardhat-network/#running-stand-alone-in-order-to-support-wallets-and-other-software">here</a>. The Hardhat standalone network exposes a <a href="https://eth.wiki/json-rpc/API">JSON RPC</a> endpoint on the localhost IP address 127.0.0.1 on port 8545.</p>
<p>In your console, type <code>yarn hardhat</code> and take a look under the “AVAILABLE TASKS” heading.  You’ll see there is a task called <code>node</code> which “Starts a JSON-RPC server on top of Hardhat EVM.”  That’s the standalone <code>localhost</code> development chain.</p>
<p>Fire it up by entering <code>yarn hardhat node</code>. You will get multiple console outputs that are worth studying. Scrolling to the top of the output it will look something like this:</p>
<img alt="image" loading="lazy" width="750" height="100" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FFiring-up-the-standalone-JSON-RPC-local-development-blockchain..4f927ba7.png&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FFiring-up-the-standalone-JSON-RPC-local-development-blockchain..4f927ba7.png&amp;w=1920&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FFiring-up-the-standalone-JSON-RPC-local-development-blockchain..4f927ba7.png&amp;w=1920&amp;q=75"/>
<p class="text-center">Firing up the standalone JSON-RPC local development blockchain.</p>
<p>Note that the node task compiles and automatically deploys our contracts to this standalone dev chain. It also tells us that it “Started HTTP and WebSocket JSON-RPC server at <a href="http://127.0.0.1:8545/.%E2%80%9D">http://127.0.0.1:8545/.”</a></p>
<p>Below that, it dumps out a bunch of wallet accounts and their private keys. Please read the warning here—these are development Ethereum accounts only and should never be used for actual transactions!</p>
<p>The benefit of having a standalone RPC endpoint is that we can connect frontend web apps to our development network and its smart contracts. We can even connect wallet apps like Metamask to it.</p>
<p>Now that we understand what’s going on with this standalone network, let’s kill that network with <code>ctrl+c</code>.  We will need to re-deploy our contracts every time we change our code anyway. We’ll also need to kill and restart this local development blockchain when our contracts get into a bad state so that we can start our NFT marketplace and token contracts with a fresh slate.</p>
<h2 id="interaction-scripts" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#interaction-scripts">Interaction Scripts</a></h2>
<p>To interact with our contracts, we need to do the following:</p>
<ul>
<li>Deploy the contracts using our deployer account (Hardhat test account with index 0).</li>
<li>Mint and list 3 NFTs with an “owner” account (Hardhat test account with index 1).</li>
<li>Buy NFT #0 with a buyer account (Hardhat test account with index 2).</li>
<li>Update NFT #1’s price and check the listing.</li>
<li>Cancel NFT #2 and check that it’s not longer listed.</li>
<li>Check that marketplace has correctly recorded the owner/seller’s proceeds from the sale of NFT #0 .</li>
</ul>
<p>These steps cover the main operations of our marketplace contract. The code in this section of the blog is a bit different from the reference repo, but you can find the interaction script code for this blog in <a href="https://gist.github.com/zeuslawyer/032f61b04495ca00cfbe8d125fd4574c">this gist</a> with each script in its own file.</p>
<h3>Minting and Listing Three NFTs</h3>
<p>To interact programmatically with our deployed contracts, we’ll use the <a href="https://hardhat.org/plugins/nomiclabs-hardhat-ethers.html">hardhat-ethers plugin</a>. This plugin wraps around the ethers.js library, which provides useful APIs to work with EVM chains.</p>
<p>There are a couple of nuances to keep in mind here. You’ll recall from earlier in this blog that the owner of an NFT can approve another Ethereum address to manage and operate token-related operations such as token transfers. This means that after a user mints a token, they need to “approve” the marketplace so that the marketplace can transfer ownership when its buyItem() function gets called. You can read about ERC721’s <code>approve()</code> method <a href="https://docs.openzeppelin.com/contracts/3.x/api/token/erc721#IERC721-approve-address-uint256-">here</a>.</p>
<p>Note in the code below that the owner mints a token, then approves the marketplace to operate it on behalf of the owner, and then the owner lists it on the marketplace. To do this, first create a new <code>&lt;&lt;root&gt;&gt;/scripts</code> folder in your project directory. Then create a new <code>mint-and-list-item.js</code> file and paste in the script below.</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">ethers</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;hardhat&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">PRICE</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">ethers</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">utils</span><span style="color: var(--shiki-token-function)">.parseEther</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;0.1&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">mintAndList</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">accounts</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">ethers</span><span style="color: var(--shiki-token-function)">.getSigners</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-constant)">deployer</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">owner</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">buyer1</span><span style="color: var(--shiki-color-text)">] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> accounts</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">IDENTITIES</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">      [</span><span style="color: var(--shiki-token-constant)">deployer</span><span style="color: var(--shiki-color-text)">.address]</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;DEPLOYER&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">      [</span><span style="color: var(--shiki-token-constant)">owner</span><span style="color: var(--shiki-color-text)">.address]</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;OWNER&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">      [</span><span style="color: var(--shiki-token-constant)">buyer1</span><span style="color: var(--shiki-color-text)">.address]</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;BUYER_1&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">nftMarketplaceContract</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">ethers</span><span style="color: var(--shiki-token-function)">.getContract</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;NftMarketplace&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">basicNftContract</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">ethers</span><span style="color: var(--shiki-token-function)">.getContract</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;BasicNft&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(Minting </span><span style="color: var(--shiki-token-constant)">NFT</span><span style="color: var(--shiki-color-text)"> for ${owner.address})</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">mintTx</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">basicNftContract</span><span style="color: var(--shiki-token-function)">.connect</span><span style="color: var(--shiki-color-text)">(owner)</span><span style="color: var(--shiki-token-function)">.mintNft</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">mintTxReceipt</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">mintTx</span><span style="color: var(--shiki-token-function)">.wait</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">tokenId</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">mintTxReceipt</span><span style="color: var(--shiki-color-text)">.events[</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">].</span><span style="color: var(--shiki-token-constant)">args</span><span style="color: var(--shiki-color-text)">.tokenId</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;Approving Marketplace as operator of NFT...&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">approvalTx</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> basicNftContract</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">.connect</span><span style="color: var(--shiki-color-text)">(owner)</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">.approve</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">nftMarketplaceContract</span><span style="color: var(--shiki-color-text)">.address</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId)</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">approvalTx</span><span style="color: var(--shiki-token-function)">.wait</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;Listing NFT...&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">tx</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> nftMarketplaceContract</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">.connect</span><span style="color: var(--shiki-color-text)">(owner)</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">.listItem</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">basicNftContract</span><span style="color: var(--shiki-color-text)">.address</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> tokenId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">PRICE</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">tx</span><span style="color: var(--shiki-token-function)">.wait</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;NFT Listed with token ID: &quot;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">tokenId</span><span style="color: var(--shiki-token-function)">.toString</span><span style="color: var(--shiki-color-text)">())</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">mintedBy</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">basicNftContract</span><span style="color: var(--shiki-token-function)">.ownerOf</span><span style="color: var(--shiki-color-text)">(tokenId)</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span>
<span><span style="color: var(--shiki-token-function)">mintAndList</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">.then</span><span style="color: var(--shiki-color-text)">(() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">process</span><span style="color: var(--shiki-token-function)">.exit</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">))</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">.catch</span><span style="color: var(--shiki-color-text)">((error) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.error</span><span style="color: var(--shiki-color-text)">(error)</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">process</span><span style="color: var(--shiki-token-function)">.exit</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">  })</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>Let’s break this down, because the same pattern will be repeated in the remaining scripts.</p>
<p>First note that the async <code>mintAndList()</code> function gets called at the bottom, and if it errors, we print the error to console and then exit with a <a href="https://www.gnu.org/software/bash/manual/html_node/Exit-Status.html">non-zero error</a>.</p>
<p>In the function body, we get a list of the twenty Hardhat accounts using <code>getSigners()</code> and we use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">JS destructuring</a> assignment to access the first three address objects and give them variable names—<code>deployer</code> is the address that deployed the smart contract, <code>owner</code> mints and owns the NFT, and <code>buyer1</code> will buy it in the next script.</p>
<p>We also create an <code>IDENTITIES</code> helper object which maps the addresses to their role. This makes debugging in the console easier.</p>
<p>We then access the contracts and run the mint, approve, and list operations. We can confirm if the value of <code>mintedBy</code> is read from the marketplace smart contract and that the address is the same as the <code>owner</code>. When listing, we pass in the <code>PRICE</code> constant, which is 0.1 ethers denominated in wei. You’ll note that we used the ethers.js utility function <code>parseEther()</code> for this (<a href="https://docs.ethers.io/v5/api/utils/display-logic/#utils-parseEther">docs</a>).</p>
<p>Now before we run the script, we need to get ready to use our standalone Hardhat RPC local testnet. We will need to have two terminal windows open to do this. In the first one, type <code>yarn hardhat node</code>. This will fire up the standalone RPC network we discussed previously.</p>
<p>In the second terminal window, type in y<code>arn hardhat run scripts/mint-and-list-item.js --network localhost</code>.  If you’ve done it right so far, you should see something like this:</p>
<img alt="image" loading="lazy" width="750" height="100" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-mint-and-list-your-NFT.590feb40.webp&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-mint-and-list-your-NFT.590feb40.webp&amp;w=1920&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-mint-and-list-your-NFT.590feb40.webp&amp;w=1920&amp;q=75"/>
<p class="text-center">Successfully mint and list your NFT.</p>
<p>If you’re curious to see how the local RPC server is logging your transactions, switch to the first terminal window and read the output there.</p>
<p>That was token 0. We need to mint two more for the scripts that come later. Simply run the same mint-and-list script two more times to get up to token ID 2.</p>
<h3>Buy a Token</h3>
<p>From our list of scripts above, you’ll remember that next we want to get one of the accounts to buy token ID 0. The structure of this second script will be identical to <code>mint-and-list</code>, but we will need to change the actual logic inside the script. Create a new <code>buy-item.js</code> script inside your <code>scripts</code> folder as shown below:</p>
<div class="not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-white"><code class="language-js"><span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> { </span><span style="color: var(--shiki-token-constant)">ethers</span><span style="color: var(--shiki-color-text)"> } </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;hardhat&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">TOKEN_ID</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// SET THIS BEFORE RUNNING SCRIPT</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">buyItem</span><span style="color: var(--shiki-color-text)">() {</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">accounts</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">ethers</span><span style="color: var(--shiki-token-function)">.getSigners</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-constant)">deployer</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">owner</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">buyer1</span><span style="color: var(--shiki-color-text)">] </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> accounts</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">IDENTITIES</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">        [</span><span style="color: var(--shiki-token-constant)">deployer</span><span style="color: var(--shiki-color-text)">.address]</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;DEPLOYER&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        [</span><span style="color: var(--shiki-token-constant)">owner</span><span style="color: var(--shiki-color-text)">.address]</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;OWNER&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        [</span><span style="color: var(--shiki-token-constant)">buyer1</span><span style="color: var(--shiki-color-text)">.address]</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;BUYER_1&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">nftMarketplaceContract</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">ethers</span><span style="color: var(--shiki-token-function)">.getContract</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;NftMarketplace&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">basicNftContract</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">ethers</span><span style="color: var(--shiki-token-function)">.getContract</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;BasicNft&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">listing</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> nftMarketplaceContract</span></span>
<span><span style="color: var(--shiki-color-text)">       </span><span style="color: var(--shiki-token-function)">.getListing</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">basicNftContract</span><span style="color: var(--shiki-color-text)">.address</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">TOKEN_ID</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">price</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">listing</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">price</span><span style="color: var(--shiki-token-function)">.toString</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">tx</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> nftMarketplaceContract</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">.connect</span><span style="color: var(--shiki-color-text)">(buyer1)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-function)">.buyItem</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">basicNftContract</span><span style="color: var(--shiki-color-text)">.address</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">TOKEN_ID</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">            value</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> price</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">        })</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">tx</span><span style="color: var(--shiki-token-function)">.wait</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;NFT Bought!&quot;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">newOwner</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">basicNftContract</span><span style="color: var(--shiki-token-function)">.ownerOf</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">TOKEN_ID</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span>
<span><span style="color: var(--shiki-token-function)">buyItem</span><span style="color: var(--shiki-color-text)">()</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">.then</span><span style="color: var(--shiki-color-text)">(() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">process</span><span style="color: var(--shiki-token-function)">.exit</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-color-text)">))</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">.catch</span><span style="color: var(--shiki-color-text)">((error) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.error</span><span style="color: var(--shiki-color-text)">(error)</span></span>
<span><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-constant)">process</span><span style="color: var(--shiki-token-function)">.exit</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">)</span></span>
<span><span style="color: var(--shiki-color-text)">    })</span></span>
<span></span></code></pre><button type="button" class="group/button absolute right-4 top-3.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>This is starting to look pretty familiar! The key difference here is that we use the ethers.js  <code>.connect(signer)</code> method to send a transaction from another account. In this case, we want to make sure that <code>buyer1</code> is the caller of the <code>buyItem()</code> method in the marketplace contract. Also note that we use the <code>getListing()</code> method to access the <code>Listing</code> details and retrieve the price, because that’s how much we need to pay in <code>buyItem()</code>. Finally, we check that the new owner of the token is actually the <code>buyer</code> by reading that data directly from the NFT contract’s state.</p>
<p>Run <code>yarn hardhat run scripts/buy-item --network localhost</code> and you should see something like this:</p>
<img alt="image" loading="lazy" width="750" height="100" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-buy-a-listed-NFT.dfad0479.webp&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-buy-a-listed-NFT.dfad0479.webp&amp;w=1920&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-buy-a-listed-NFT.dfad0479.webp&amp;w=1920&amp;q=75"/>
<p class="text-center">Successfully buy a listed NFT.</p>
<h3>Update a Token’s Price</h3>
<p>Now that we have sold Token 0, it’s no longer listed on the marketplace. The next step is to update the price of token ID 1, which was minted and listed at the start. You’ll see the pattern repeating here, so create the <code>update-listing</code> script and paste the correct code <a href="https://gist.github.com/zeuslawyer/032f61b04495ca00cfbe8d125fd4574c">from this gist</a>. If you run <code>yarn hardhat run scripts/update-listing --network localhost</code> and have set the right <code>TOKEN_ID</code>, then you should see logs like the one below that show that the price has been updated:</p>
<img alt="image" loading="lazy" width="750" height="144" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-update-the-price-of-a-listed-NFT.28afdf43.webp&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-update-the-price-of-a-listed-NFT.28afdf43.webp&amp;w=1920&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FSuccessfully-update-the-price-of-a-listed-NFT.28afdf43.webp&amp;w=1920&amp;q=75"/>
<p class="text-center">Successfully update the price of a listed NFT.</p>
<h3>The Remaining Two Operations</h3>
<p>All that’s left is to write two scripts—one to cancel a Listing and another to let the owner/seller know what their proceeds are from their token sale. Again, check the gists for the code and you should get logs in your console that look like the following when you run <code>scripts/cancel-item.js</code>:</p>
<img alt="image" loading="lazy" width="750" height="100" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FCancel-the-listing-of-a-NFT.02d77478.webp&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FCancel-the-listing-of-a-NFT.02d77478.webp&amp;w=1920&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FCancel-the-listing-of-a-NFT.02d77478.webp&amp;w=1920&amp;q=75"/>
<p class="text-center">Cancel the listing of an NFT.</p>
<p>To see how much the owner of the NFTs got from the sale of their token, we run <code>get-seller-proceeds.js</code>, which should produce the following:</p>
<img alt="image" loading="lazy" width="750" height="100" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FCheck-a-sellers-proceeds-stored-in-the-marketplace-smart-contract.fc6d17bd.webp&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FCheck-a-sellers-proceeds-stored-in-the-marketplace-smart-contract.fc6d17bd.webp&amp;w=1920&amp;q=75 2x" src="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FCheck-a-sellers-proceeds-stored-in-the-marketplace-smart-contract.fc6d17bd.webp&amp;w=1920&amp;q=75"/>
<p class="text-center">Check a seller’s proceeds stored in the marketplace smart contract.</p>
<p>Note that the seller’s proceeds, stored in the marketplace contract’s <code>s_proceeds</code> mapping, are denominated in wei. To convert this back to a more readable ETH amount, we use the ether.js utility function <code>.formatEther()</code> (<a href="https://docs.ethers.io/v5/api/utils/display-logic/#utils-formatEther">docs</a>).</p>
<h2 id="wrapping-up" class="scroll-mt-24"><a class="group text-inherit no-underline hover:text-inherit" href="/solidity_tutorials#wrapping-up">Wrapping Up</a></h2>
<p>It’s always a good idea to run automated tests on your code. This reference repo has a suite of tests that you can refer to that use <a href="https://hardhat.org/tutorial/testing-contracts.html">Hardhat tools</a> that leverage Mocha and Waffle utilities. The tests also check for the <code>revert()</code>, function modifier, and exception handling behavior that we expect. They’re incredibly useful for understanding the edge cases to look out for, so make sure to check them out.</p>
<p>If you want to build a frontend that interacts with the NFTMarketplace smart contract, take a look at this <a href="https://www.youtube.com/watch?v=l4r0IXjAlpc">video from the Chainlink Spring 2022 Hackathon.</a> Building a frontend would be a fun challenge and give you all the skills you need to sell an NFT collection on your own NFT marketplace!</p></article></main><footer class="mx-auto max-w-2xl space-y-10 pb-16 lg:max-w-5xl"><div class="relative h-8"><form class="absolute inset-0 flex items-center justify-center gap-6 md:justify-start"><p class="text-sm text-zinc-600 dark:text-zinc-400">Was this page helpful?</p><div class="group grid h-8 grid-cols-[1fr,1px,1fr] overflow-hidden rounded-full border border-zinc-900/10 dark:border-white/10"><button type="submit" class="px-3 text-sm font-medium text-zinc-600 transition hover:bg-zinc-900/2.5 hover:text-zinc-900 dark:text-zinc-400 dark:hover:bg-white/5 dark:hover:text-white" data-response="yes">Yes</button><div class="bg-zinc-900/10 dark:bg-white/10"></div><button type="submit" class="px-3 text-sm font-medium text-zinc-600 transition hover:bg-zinc-900/2.5 hover:text-zinc-900 dark:text-zinc-400 dark:hover:bg-white/5 dark:hover:text-white" data-response="no">No</button></div></form></div><div class="flex"><div class="flex flex-col items-start gap-3"><a class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-full bg-zinc-100 py-1 px-3 text-zinc-900 hover:bg-zinc-200 dark:bg-zinc-800/40 dark:text-zinc-400 dark:ring-1 dark:ring-inset dark:ring-zinc-800 dark:hover:bg-zinc-800 dark:hover:text-zinc-300" aria-label="Previous: NFT Tutorials" href="/nft_tutorials"><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="mt-0.5 h-5 w-5 -ml-1 rotate-180"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m11.5 6.5 3 3.5m0 0-3 3.5m3-3.5h-9"></path></svg>Previous</a><a tabindex="-1" aria-hidden="true" class="text-base font-semibold text-zinc-900 transition hover:text-zinc-600 dark:text-white dark:hover:text-zinc-300" href="/nft_tutorials">NFT Tutorials</a></div><div class="ml-auto flex flex-col items-end gap-3"><a class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-full bg-zinc-100 py-1 px-3 text-zinc-900 hover:bg-zinc-200 dark:bg-zinc-800/40 dark:text-zinc-400 dark:ring-1 dark:ring-inset dark:ring-zinc-800 dark:hover:bg-zinc-800 dark:hover:text-zinc-300" aria-label="Next: Set up MetaMask (Mainnet)" href="/setup_metamask_mainnet">Next<svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="mt-0.5 h-5 w-5 -mr-1"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m11.5 6.5 3 3.5m0 0-3 3.5m3-3.5h-9"></path></svg></a><a tabindex="-1" aria-hidden="true" class="text-base font-semibold text-zinc-900 transition hover:text-zinc-600 dark:text-white dark:hover:text-zinc-300" href="/setup_metamask_mainnet">Set up MetaMask (Mainnet)</a></div></div><div class="flex flex-col items-center justify-between gap-5 border-t border-zinc-900/5 pt-8 dark:border-white/5 sm:flex-row"><p class="text-xs text-zinc-600 dark:text-zinc-400">© Copyright <!-- -->2023<!-- -->. All rights reserved.</p><div class="flex gap-4"><a class="group" href="/solidity_tutorials#"><span class="sr-only">Follow us on Twitter</span><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-700 transition group-hover:fill-zinc-900 dark:group-hover:fill-zinc-500"><path d="M16.712 6.652c.01.146.01.29.01.436 0 4.449-3.267 9.579-9.242 9.579v-.003a8.963 8.963 0 0 1-4.98-1.509 6.379 6.379 0 0 0 4.807-1.396c-1.39-.027-2.608-.966-3.035-2.337.487.097.99.077 1.467-.059-1.514-.316-2.606-1.696-2.606-3.3v-.041c.45.26.956.404 1.475.42C3.18 7.454 2.74 5.486 3.602 3.947c1.65 2.104 4.083 3.382 6.695 3.517a3.446 3.446 0 0 1 .94-3.217 3.172 3.172 0 0 1 4.596.148 6.38 6.38 0 0 0 2.063-.817 3.357 3.357 0 0 1-1.428 1.861 6.283 6.283 0 0 0 1.865-.53 6.735 6.735 0 0 1-1.62 1.744Z"></path></svg></a><a class="group" href="/solidity_tutorials#"><span class="sr-only">Follow us on GitHub</span><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-700 transition group-hover:fill-zinc-900 dark:group-hover:fill-zinc-500"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 1.667c-4.605 0-8.334 3.823-8.334 8.544 0 3.78 2.385 6.974 5.698 8.106.417.075.573-.182.573-.406 0-.203-.011-.875-.011-1.592-2.093.397-2.635-.522-2.802-1.002-.094-.246-.5-1.005-.854-1.207-.291-.16-.708-.556-.01-.567.656-.01 1.124.62 1.281.876.75 1.292 1.948.93 2.427.705.073-.555.291-.93.531-1.143-1.854-.213-3.791-.95-3.791-4.218 0-.929.322-1.698.854-2.296-.083-.214-.375-1.09.083-2.265 0 0 .698-.224 2.292.876a7.576 7.576 0 0 1 2.083-.288c.709 0 1.417.096 2.084.288 1.593-1.11 2.291-.875 2.291-.875.459 1.174.167 2.05.084 2.263.53.599.854 1.357.854 2.297 0 3.278-1.948 4.005-3.802 4.219.302.266.563.78.563 1.58 0 1.143-.011 2.061-.011 2.35 0 .224.156.491.573.405a8.365 8.365 0 0 0 4.11-3.116 8.707 8.707 0 0 0 1.567-4.99c0-4.721-3.73-8.545-8.334-8.545Z"></path></svg></a><a class="group" href="/solidity_tutorials#"><span class="sr-only">Join our Discord server</span><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-700 transition group-hover:fill-zinc-900 dark:group-hover:fill-zinc-500"><path d="M16.238 4.515a14.842 14.842 0 0 0-3.664-1.136.055.055 0 0 0-.059.027 10.35 10.35 0 0 0-.456.938 13.702 13.702 0 0 0-4.115 0 9.479 9.479 0 0 0-.464-.938.058.058 0 0 0-.058-.027c-1.266.218-2.497.6-3.664 1.136a.052.052 0 0 0-.024.02C1.4 8.023.76 11.424 1.074 14.782a.062.062 0 0 0 .024.042 14.923 14.923 0 0 0 4.494 2.272.058.058 0 0 0 .064-.02c.346-.473.654-.972.92-1.496a.057.057 0 0 0-.032-.08 9.83 9.83 0 0 1-1.404-.669.058.058 0 0 1-.029-.046.058.058 0 0 1 .023-.05c.094-.07.189-.144.279-.218a.056.056 0 0 1 .058-.008c2.946 1.345 6.135 1.345 9.046 0a.056.056 0 0 1 .059.007c.09.074.184.149.28.22a.058.058 0 0 1 .023.049.059.059 0 0 1-.028.046 9.224 9.224 0 0 1-1.405.669.058.058 0 0 0-.033.033.056.056 0 0 0 .002.047c.27.523.58 1.022.92 1.495a.056.056 0 0 0 .062.021 14.878 14.878 0 0 0 4.502-2.272.055.055 0 0 0 .016-.018.056.056 0 0 0 .008-.023c.375-3.883-.63-7.256-2.662-10.246a.046.046 0 0 0-.023-.021Zm-9.223 8.221c-.887 0-1.618-.814-1.618-1.814s.717-1.814 1.618-1.814c.908 0 1.632.821 1.618 1.814 0 1-.717 1.814-1.618 1.814Zm5.981 0c-.887 0-1.618-.814-1.618-1.814s.717-1.814 1.618-1.814c.908 0 1.632.821 1.618 1.814 0 1-.71 1.814-1.618 1.814Z"></path></svg></a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"imgBlockchain":{"src":"/_next/static/media/Firing-up-the-standalone-JSON-RPC-local-development-blockchain..4f927ba7.png","height":420,"width":1600,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAAQUlEQVR4nB2KwQkAIQwEN5d0do+DQ8T+K1CsQANZg7/dmZHvfxkRIAlfDt8ONYOq5t6Q2gofkRuM0TFnT2n3J8YBUMEeGswhahsAAAAASUVORK5CYII=","blurWidth":8,"blurHeight":2},"imgBuy":{"src":"/_next/static/media/Successfully-buy-a-listed-NFT.dfad0479.webp","height":228,"width":1534,"blurDataURL":"data:image/webp;base64,UklGRioAAABXRUJQVlA4IB4AAACQAQCdASoIAAEAAkA4JaQAAudZtgAA/vsaf+9QAAA=","blurWidth":8,"blurHeight":1},"imgCancel":{"src":"/_next/static/media/Cancel-the-listing-of-a-NFT.02d77478.webp","height":96,"width":1300,"blurDataURL":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAACQAQCdASoIAAEAAkA4JaQAAp1HI1AA/vn+bSrxYAAAAA==","blurWidth":8,"blurHeight":1},"imgCheck":{"src":"/_next/static/media/Check-a-sellers-proceeds-stored-in-the-marketplace-smart-contract.fc6d17bd.webp","height":156,"width":1230,"blurDataURL":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAACQAQCdASoIAAEAAkA4JaQAAudZtgAA/vp/NwlDgwAAAA==","blurWidth":8,"blurHeight":1},"imgHardHat":{"src":"/_next/static/media/Creating-Empty-Hardhat-Config.2f6118a3.webp","height":835,"width":1600,"blurDataURL":"data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAACwAQCdASoIAAQAAkA4JZwC7AD0bVroAP78bWL68Avw4dnHBVDxa5uYAAA=","blurWidth":8,"blurHeight":4},"imgMarketplace":{"src":"/_next/static/media/NftMarketplace.5c86d4cd.webp","height":88,"width":1497,"blurDataURL":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAACQAQCdASoIAAEAAkA4JaQAAudZtgAA/vE4b9MlAIAAAA==","blurWidth":8,"blurHeight":1},"imgNft":{"src":"/_next/static/media/Successfully-mint-and-list-your-NFT.590feb40.webp","height":249,"width":1600,"blurDataURL":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAACQAQCdASoIAAEAAkA4JaQAAudZtgAA/vsaJyoA0xwAAA==","blurWidth":8,"blurHeight":1},"imgPrice":{"src":"/_next/static/media/Successfully-update-the-price-of-a-listed-NFT.28afdf43.webp","height":156,"width":810,"blurDataURL":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAACQAQCdASoIAAIAAkA4JaQAAudP5GAA/va6sWFDUsgAAAAA","blurWidth":8,"blurHeight":2},"imgSuccess":{"src":"/_next/static/media/Successfully-run-the-deploy-task-to-compile-and-deploy-all-smart-contracts..e403fca0.png","height":192,"width":1600,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAIAAABsYngUAAAAHElEQVR42mP09vFkYPj/Gwp+sbKyMTIyfvv2FQCpEg2nyMmzOQAAAABJRU5ErkJggg==","blurWidth":8,"blurHeight":1},"imgTerminal":{"src":"/_next/static/media/The-deploy-task-correctly-showing-in-the-terminal.c385d4bc.png","height":573,"width":838,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAfUlEQVR42mMIDPR3cnY0NTO2sDTV0VXV1FLR1lHX0FRh8PfzdrC3jo2N8vHxsrI2B0trqKopMDh7uRtZm3sF+jm6OOroqAHVqqkrqmsoMSR7uIabG+eGBkf6+Ti7OZuYGADlQBLpIUGRTnZZYSHhfj6e3h5OTnZ6+lpq6ooAvVIcNEQldskAAAAASUVORK5CYII=","blurWidth":8,"blurHeight":5},"sections":[{"title":"Deploy a NFT (ERC-721) Tutorial","id":"deploy_tutorial"},{"title":"Deploy a Smart Contract","id":"deploy_contract"},{"title":"Deploy a ERC-20 Token","id":"deploy_token"},{"title":"How To Build an NFT Marketplace","id":"build_marketplace"}],"title":"Solidity Tutorials"},"__N_SSG":true},"page":"/solidity_tutorials","query":{},"buildId":"yAxsx7lFrlH2wGZWlIy3B","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>